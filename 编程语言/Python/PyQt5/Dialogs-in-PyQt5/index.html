<!DOCTYPE html>
<html>
<!-- html页面布局的head -->

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<title>
		modao
	</title>

	<!-- 百度统计代码 -->
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?902dc461fe0d25f09e74e0d04677b6d8";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-N2WTGJE0M5"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-N2WTGJE0M5');
	</script>
<meta name="generator" content="Hexo 5.4.0"></head>

  <body>

    <!-- 文章详情页模板 -->

<!-- 主页标题栏 -->

<link rel="stylesheet" href="/css/navigatebar.css">


<header class="header">
	<div class="topbar">
		<div class="topbar-button topbar-mine">
			<a href="/">
				modao
			</a>
		</div>
		
			<div class="topbar-button">
				<a href="/">
					Home
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/categories">
					Categories
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/links">
					Friends
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/sites">
					Sites
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/stars">
					Stars
				</a>
			</div>
		

	</div>
	<div class="slogan">
		「生活可以更简单, 欢迎来到我的开源世界」
	</div>
</header>


<link rel="stylesheet" href="/css/font.css">


<link rel="stylesheet" href="/css/post.css" media="screen and (min-width: 600px)">


<link rel="stylesheet" href="/css/post_mobile.css" media="screen and (max-width: 600px)">


<link rel="stylesheet" href="/css/highlight.css">




<div class="toc">
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-QInputDialog"><span class="toc-text">PyQt5 QInputDialog</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-QColorDialog"><span class="toc-text">PyQt5 QColorDialog</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-QFontDialog"><span class="toc-text">PyQt5 QFontDialog</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-QFileDialog"><span class="toc-text">PyQt5 QFileDialog</span></a></li></ol>
</div>

<div class="content-area">
	<div class="title">
		PyQt5 中的对话框
	</div>
	
	<div class="page-date">
		2020-08-19
	</div>
	
	<div class="category-area">
		
			 
				「
				<div class="category">
					<a href="/categories/python">python</a>
				
				</div>
				」
			 
				「
				<div class="category">
					<a href="/categories/PyQt5">PyQt5</a>
				
				</div>
				」
			
		
	</div>
	
	<div class="content">
		<p><a target="_blank" rel="noopener" href="http://zetcode.com/gui/pyqt5/dialogs/">翻译自原文：Dialogs in PyQt5</a></p>
<p>翻译时间 2020 年 8 月 19 日</p>
<span id="more"></span>

<p>对话定义为两个或多人之间的对话。在计算机应用程序中，对话框是用户与应用程序”对话”的窗口。对话框用于从用户获取数据或更改应用程序设置等操作。</p>
<h2 id="PyQt5-QInputDialog"><a href="#PyQt5-QInputDialog" class="headerlink" title="PyQt5 QInputDialog"></a>PyQt5 QInputDialog</h2><p><code>QInputDialog</code>提供了一个简便对话框，从用户获取单个值。输入值可以是字符串、数字或列表中的项。</p>
<p>input_dialog.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">from PyQt5.QtWidgets import (QWidget, QPushButton, QLineEdit,<br>                             QInputDialog, QApplication)<br>import sys<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        self.btn = QPushButton(&#x27;Dialog&#x27;, self)<br>        self.btn.move(20, 20)<br>        self.btn.clicked.connect(self.showDialog)<br><br>        self.le = QLineEdit(self)<br>        self.le.move(130, 22)<br><br>        self.setGeometry(300, 300, 450, 350)<br>        self.setWindowTitle(&#x27;Input dialog&#x27;)<br>        self.show()<br><br>    def showDialog(self):<br>        text, ok = QInputDialog.getText(self, &#x27;Input Dialog&#x27;,<br>                                        &#x27;Enter your name:&#x27;)<br><br>        if ok:<br>            self.le.setText(str(text))<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>该示例具有一个按钮和一个行编辑部件。该按钮显示用于获取文本值的输入对话框。输入的文本将显示在行编辑部件中。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">text, ok = QInputDialog.getText(self, &#x27;Input Dialog&#x27;,<br>    &#x27;Enter your name:&#x27;)<br></code></pre></td></tr></table></figure>

<p>此行显示输入对话框。第一个字符串是对话框标题，第二个字符串是对话框中的消息。该对话框返回输入的文本和布尔值。如果我们单击”确定”按钮，则布尔值为 true。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">if ok:<br>    self.le.setText(str(text))<br></code></pre></td></tr></table></figure>

<p>我们通过<code>setText()</code>将行编辑部件的文本内容设置为从对话框中收到的文本。</p>
<p><img src="/Dialogs-in-PyQt5/image-20200819170027455.png" alt="image-20200819170027455"></p>
<center>图：输入对话框</center>

<h2 id="PyQt5-QColorDialog"><a href="#PyQt5-QColorDialog" class="headerlink" title="PyQt5 QColorDialog"></a>PyQt5 QColorDialog</h2><p><code>QColorDialog</code>提供用于选择颜色值的对话框部件。</p>
<p>color_dialog.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">from PyQt5.QtWidgets import (QWidget, QPushButton, QFrame,<br>                             QColorDialog, QApplication)<br>from PyQt5.QtGui import QColor<br>import sys<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        col = QColor(0, 0, 0)<br><br>        self.btn = QPushButton(&#x27;Dialog&#x27;, self)<br>        self.btn.move(20, 20)<br><br>        self.btn.clicked.connect(self.showDialog)<br><br>        self.frm = QFrame(self)<br>        self.frm.setStyleSheet(&quot;QWidget &#123; background-color: %s &#125;&quot;<br>                               % col.name())<br>        self.frm.setGeometry(130, 22, 200, 200)<br><br>        self.setGeometry(300, 300, 450, 350)<br>        self.setWindowTitle(&#x27;Color dialog&#x27;)<br>        self.show()<br><br>    def showDialog(self):<br>        col = QColorDialog.getColor()<br><br>        if col.isValid():<br>            self.frm.setStyleSheet(&#x27;QWidget &#123; background-color: %s &#125;&#x27;<br>                                   % col.name())<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>应用程序示例显示按钮和 。<code>QFrame</code>部件背景设置为黑色。使用 <code>QColorDialog</code>我们可以更改其背景。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">col = QColor(0, 0, 0)<br></code></pre></td></tr></table></figure>

<p>这是<code>QFrame</code>背景的初始颜色。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">col = QColorDialog.getColor()<br></code></pre></td></tr></table></figure>

<p>弹出<code>QColorDialog</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">if col.isValid():<br>    self.frm.setStyleSheet(&quot;QWidget &#123; background-color: %s &#125;&quot;<br>        % col.name())<br></code></pre></td></tr></table></figure>

<p>我们检查颜色是否有效。如果我们单击”取消”按钮，则不会返回任何有效颜色。如果颜色有效，我们使用样式表更改背景颜色。</p>
<p><img src="/Dialogs-in-PyQt5/image-20200819170635485.png" alt="image-20200819170635485"></p>
<h2 id="PyQt5-QFontDialog"><a href="#PyQt5-QFontDialog" class="headerlink" title="PyQt5 QFontDialog"></a>PyQt5 QFontDialog</h2><p><code>QFontDialog</code>是用于选择字体的对话框部件。</p>
<p>font_dialog.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">from PyQt5.QtWidgets import (QWidget, QVBoxLayout, QPushButton,<br>                             QSizePolicy, QLabel, QFontDialog, QApplication)<br>import sys<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        vbox = QVBoxLayout()<br><br>        btn = QPushButton(&#x27;Dialog&#x27;, self)<br>        btn.setSizePolicy(QSizePolicy.Fixed, QSizePolicy.Fixed)<br>        btn.move(20, 20)<br><br>        vbox.addWidget(btn)<br><br>        btn.clicked.connect(self.showDialog)<br><br>        self.lbl = QLabel(&#x27;Knowledge only matters&#x27;, self)<br>        self.lbl.move(130, 20)<br><br>        vbox.addWidget(self.lbl)<br>        self.setLayout(vbox)<br><br>        self.setGeometry(300, 300, 450, 350)<br>        self.setWindowTitle(&#x27;Font dialog&#x27;)<br>        self.show()<br><br>    def showDialog(self):<br><br>        font, ok = QFontDialog.getFont()<br>        if ok:<br>            self.lbl.setFont(font)<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在我们的示例中，我们有一个按钮和一个标签。使用<code>QFontDialog</code>我们更改标签的字体。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">font, ok = QFontDialog.getFont()<br></code></pre></td></tr></table></figure>

<p>在这里，我们弹出字体对话框。<code>getFont</code>方法返回字体名称和 OK 参数。如果用户单击”确定”，<code>OK</code>将等于”True”，否则它是”False“的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">if ok:<br>    self.label.setFont(font)<br></code></pre></td></tr></table></figure>

<p>如果我们单击”确定”，则<code>setFont</code>将更改标签的字体。</p>
<p><img src="/Dialogs-in-PyQt5/image-20200819171024413.png" alt="image-20200819171024413"></p>
<h2 id="PyQt5-QFileDialog"><a href="#PyQt5-QFileDialog" class="headerlink" title="PyQt5 QFileDialog"></a>PyQt5 QFileDialog</h2><p><code>QFileDialog</code>是允许用户选择文件或目录的对话框。可以选择这些文件进行打开和保存。</p>
<p>file_dialog.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">from PyQt5.QtWidgets import (QMainWindow, QTextEdit,<br>                             QAction, QFileDialog, QApplication)<br>from PyQt5.QtGui import QIcon<br>import sys<br>from pathlib import Path<br>from PyQt5.QtCore import QFileInfo<br><br><br>class Example(QMainWindow):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        self.textEdit = QTextEdit()<br>        self.setCentralWidget(self.textEdit)<br>        self.statusBar()<br><br>        root = QFileInfo(__file__).absolutePath()<br>        openFile = QAction(QIcon(root + &#x27;/web.png&#x27;), &#x27;Open&#x27;, self)<br>        openFile.setShortcut(&#x27;Ctrl+O&#x27;)<br>        openFile.setStatusTip(&#x27;Open new File&#x27;)<br>        openFile.triggered.connect(self.showDialog)<br><br>        menubar = self.menuBar()<br>        fileMenu = menubar.addMenu(&#x27;&amp;File&#x27;)<br>        fileMenu.addAction(openFile)<br><br>        self.setGeometry(300, 300, 550, 450)<br>        self.setWindowTitle(&#x27;File dialog&#x27;)<br>        self.show()<br><br>    def showDialog(self):<br><br>        home_dir = str(Path.home())<br>        fname = QFileDialog.getOpenFileName(self, &#x27;Open file&#x27;, home_dir)<br><br>        if fname[0]:<br>            f = open(fname[0], &#x27;r&#x27;)<br><br>            with f:<br>                data = f.read()<br>                self.textEdit.setText(data)<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>该示例显示菜单栏、文本编辑部件（中心部件）和状态栏。菜单项显示用于选择文件的<code>QFileDialog</code>。文件的内容加载到文本编辑部件中。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">class Example(QMainWindow):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br></code></pre></td></tr></table></figure>

<p>该示例基于<code>QMainWindow</code>部件，因为我们设置了文本编辑小部件为center。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">home_dir = str(Path.home())<br>fname = QFileDialog.getOpenFileName(self, &#x27;Open file&#x27;, home_dir)<br></code></pre></td></tr></table></figure>

<p>我们弹出<code>QFileDialog</code>，<code>getOpenFileName()</code>方法中的第一个字符串是标题，第二个字符串指定对话框工作目录。我们使用<code>path</code>模块来确定用户主目录。默认情况下，文件筛选器设置为”所有文件”（*）。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">if fname[0]:<br>    f = open(fname[0], &#x27;r&#x27;)<br><br>    with f:<br>        data = f.read()<br>        self.textEdit.setText(data)<br></code></pre></td></tr></table></figure>

<p>读取所选文件名，将文件内容设置为文本编辑小部件。</p>
<p>在 PyQt5 教程的这一部分中，我们使用对话框。</p>
<p><img src="/Dialogs-in-PyQt5/image-20200819172232428.png" alt="image-20200819172232428"></p>

	</div>
</div>
<!-- 返回顶部模块 -->
<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;font-size:26px;background-color:#8590a6">
	<a title="返回顶部" style="color:#04fa9f"><⇧></a>
</div>
<script src="/js/totop.js"></script>

  </body>

</html>