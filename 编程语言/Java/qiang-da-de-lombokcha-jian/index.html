<!doctype html><html lang=zh-Hans-CN><head><title>modao's blog</title><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><meta content=noodp name=robots><link href=https://modao.site/style.css rel=stylesheet><link href=https://modao.site/color/green.css rel=stylesheet><link href=https://modao.site/color/background_dark.css rel=stylesheet><link href=https://modao.site/font-hack.css rel=stylesheet><script src="https://www.googletagmanager.com/gtag/js?id=G-N2WTGJE0M5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-N2WTGJE0M5');</script><body><div class=container><header class=header><div class=header__inner><div class=header__logo><a style="text-decoration: none;" href=https://modao.site> <div class=logo>MODAO</div> </a></div></div><nav class=menu><ul class=menu__inner><li class=active><a href=https://modao.site>Home</a><li><a href=https://modao.site/tags>Tags</a><li><a href=https://modao.site/language>PL</a><li><a href=https://modao.site/books>Books</a><li><a href=https://modao.site/links>Links</a><li><a href=https://modao.site/friend>Friend</a></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://modao.site/编程语言/Java/qiang-da-de-lombokcha-jian/>IDEA的lombok插件</a></h1><div class=post-meta-inline><span class=post-date> 2021-01-13 </span></div><div class=post-content><p>IDEA的lombok插件<h2 id=jian-jie>简介</h2><p>Lombok项目是一种自动接通你的编辑器和构建工具的一个Java库。<p>在Java编程时，写完字段后，需要一个一个去写getter和setter方法。在使用Idea编程时，可以按住ALT+INSERT键，让IDE自动生成getter, setter, toString等方法。然而，当一个类的字段特别多时，整个文件看起来将非常不简洁。所幸IDEA提供了一款lombok插件，可以在代码阶段，通过添加注解的形式，省去手写getter, setter的麻烦。<p>而且，当我们的变量发生改变时，不再需要修改对应的getter、setter方法，lombok帮我们在运行的过程中自动生成上述方法，编码更灵活。<h2 id=shi-yong>使用</h2><p>首先，在IDEA安装 lombok 插件<p>接着，在项目的pom文件中添加lombok依赖（版本自行选择），注意此处scope填写provided，代表这个包不需要打包发布，仅编译时需要用到，且已有提供方。<pre class=language-xml data-lang=xml style=background-color:#2b303b;color:#c0c5ce;><code class=language-xml data-lang=xml><span><</span><span style=color:#bf616a;>dependency</span><span>>
</span><span>    <</span><span style=color:#bf616a;>groupId</span><span>>org.projectlombok&LT/</span><span style=color:#bf616a;>groupId</span><span>>
</span><span>    <</span><span style=color:#bf616a;>artifactId</span><span>>lombok&LT/</span><span style=color:#bf616a;>artifactId</span><span>>
</span><span>    <</span><span style=color:#bf616a;>version</span><span>>1.16.18&LT/</span><span style=color:#bf616a;>version</span><span>>
</span><span>    <</span><span style=color:#bf616a;>scope</span><span>>provided&LT/</span><span style=color:#bf616a;>scope</span><span>>
</span><span>&LT/</span><span style=color:#bf616a;>dependency</span><span>>
</span></code></pre><p>然后，在模型类上，添加注解 @Data，即可省去手写getter, setter, toString的麻烦。<p><strong>需要注意的是，一旦启用lombok插件，那么团队中其他成员也必须安装此插件，否则会编译报错。</strong><h2 id=geng-duo>更多</h2><p><strong>lombok中的常用注解</strong><ul><li><p>@Setter ：在JavaBean或类JavaBean中使用，使用此注解会生成对应的setter方法；</p><li><p>@Getter：在JavaBean或类JavaBean中使用，使用此注解会生成对应的getter方法；</p><li><p>@ToString：在JavaBean或类JavaBean中使用，使用此注解会自动重写对应的toStirng方法；</p><li><p>@NoArgsConstructor：在JavaBean或类JavaBean中使用，使用此注解会生成对应的无参构造方法；</p><li><p>@HashCode：</p><li><p>@Equals：</p><li><p>@CanEqual：</p><li><p>@Data：在JavaBean或类JavaBean中使用，这个注解包含范围最广，它包含上述注解，即当使用当前注解时，会自动生成包含的所有方法；</p><li><p>@AllArgsConstructor：在JavaBean或类JavaBean中使用，使用此注解会生成对应的有参构造方法；</p><li><p>@Log(这是一个泛型注解，具体有很多种形式)</p><li><p>@EqualsAndHashCode：在JavaBean或类JavaBean中使用，使用此注解会自动重写对应的equals方法和hashCode方法；</p> <ul><li>此注解会生成<code>equals(Object other)</code> 和 <code>hashCode()</code>方法。<li>它默认使用非静态，非瞬态的属性<li>可通过参数<code>exclude</code>排除一些属性<li>可通过参数<code>of</code>指定仅使用哪些属性<li>它默认仅使用该类中定义的属性且不调用父类的方法<li>可通过<code>callSuper=true</code>解决上一点问题。让其生成的方法中调用父类的方法。</ul><li><p>@Slf4j：在需要打印日志的类中使用，当项目中使用了slf4j打印日志框架时使用该注解，会简化日志的打印流程，只需调用info方法即可；</p><li><p>@Log4j：在需要打印日志的类中使用，当项目中使用了log4j打印日志框架时使用该注解，会简化日志的打印流程，只需调用info方法即可；</p></ul><p><strong>在使用以上注解需要处理参数时，处理方法如下（以@ToString注解为例，其他注解同@ToString注解）：</strong><p>@ToString(exclude="column")<p>意义：排除column列所对应的元素，即在生成toString方法时不包含column参数；<p>@ToString(exclude={"column1","column2"})<p>意义：排除多个column列所对应的元素，其中间用英文状态下的逗号进行分割，即在生成toString方法时不包含多个column参数；<p>@ToString(of="column")<p>意义：只生成包含column列所对应的元素的参数的toString方法，即在生成toString方法时只包含column参数；；<p>@ToString(of={"column1","column2"})<p>意义：只生成包含多个column列所对应的元素的参数的toString方法，其中间用英文状态下的逗号进行分割，即在生成toString方法时只包含多个column参数；<p>@Date一般和@EqualsAndHashCode同时使用，因为：<p>通过官方文档，可以得知，当使用@Data注解时，则有了@EqualsAndHashCode注解，那么就会在此类中存在equals(Object other) 和 hashCode()方法，且不会使用父类的属性，这就导致了可能的问题。<p>比如，有多个类有相同的部分属性，把它们定义到父类中，恰好id（数据库主键）也在父类中，那么就会存在部分对象在比较时，它们并不相等，却因为lombok自动生成的equals(Object other) 和 hashCode()方法判定为相等，从而导致出错。<p>修复此问题的方法很简单：<ol><li><p>使用@Getter @Setter @ToString代替@Data并且自定义equals(Object other) 和 hashCode()方法，比如有些类只需要判断主键id是否相等即足矣。</p><li><p>或者使用在使用@Data时同时加上@EqualsAndHashCode(callSuper=true)注解。</p></ol></div></div></div><footer class=footer__poweredby><p class=caption>© 2022 All Rights Reserved modao::rustacean@aliyun.com<p class=caption>© Powered by <a href=https://www.getzola.org/>Zola</a><p class=caption>© Theme: <a href=https://github.com/pawroman/zola-theme-terminimal/>Terminimal</a> by pawroman<p class=caption><a href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh rel=license>自由转载-非商用-非衍生-保持署名</a></footer></div>