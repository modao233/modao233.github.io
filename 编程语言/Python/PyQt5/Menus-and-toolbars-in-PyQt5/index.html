<!DOCTYPE html>
<html>
<!-- html页面布局的head -->

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<title>
		modao
	</title>

	<!-- 百度统计代码 -->
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?902dc461fe0d25f09e74e0d04677b6d8";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-N2WTGJE0M5"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-N2WTGJE0M5');
	</script>
<meta name="generator" content="Hexo 5.4.0"></head>

  <body>

    <!-- 文章详情页模板 -->

<!-- 主页标题栏 -->

<link rel="stylesheet" href="/css/navigatebar.css">


<header class="header">
	<div class="topbar">
		<div class="topbar-button topbar-mine">
			<a href="/">
				modao
			</a>
		</div>
		
			<div class="topbar-button">
				<a href="/">
					Home
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/categories">
					Categories
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/links">
					Friends
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/sites">
					Sites
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/stars">
					Stars
				</a>
			</div>
		

	</div>
	<div class="slogan">
		「生活可以更简单, 欢迎来到我的开源世界」
	</div>
</header>


<link rel="stylesheet" href="/css/font.css">


<link rel="stylesheet" href="/css/post.css" media="screen and (min-width: 600px)">


<link rel="stylesheet" href="/css/post_mobile.css" media="screen and (max-width: 600px)">


<link rel="stylesheet" href="/css/highlight.css">




<div class="toc">
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#QmainWindow"><span class="toc-text">QmainWindow</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%A0%8F"><span class="toc-text">状态栏</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E7%AE%80%E6%98%93%E8%8F%9C%E5%8D%95"><span class="toc-text">PyQt5 简易菜单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E5%AD%90%E8%8F%9C%E5%8D%95"><span class="toc-text">PyQt5 子菜单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E5%A4%8D%E9%80%89%E8%8F%9C%E5%8D%95"><span class="toc-text">PyQt5 复选菜单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E4%B8%8A%E4%B8%8B%E6%96%87%E8%8F%9C%E5%8D%95"><span class="toc-text">PyQt5 上下文菜单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E5%B7%A5%E5%85%B7%E6%A0%8F"><span class="toc-text">PyQt5 工具栏</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E4%B8%BB%E7%AA%97%E5%8F%A3"><span class="toc-text">PyQt5 主窗口</span></a></li></ol>
</div>

<div class="content-area">
	<div class="title">
		PyQt5 中的菜单和工具栏
	</div>
	
	<div class="page-date">
		2020-08-19
	</div>
	
	<div class="category-area">
		
			 
				「
				<div class="category">
					<a href="/categories/python">python</a>
				
				</div>
				」
			 
				「
				<div class="category">
					<a href="/categories/PyQt5">PyQt5</a>
				
				</div>
				」
			
		
	</div>
	
	<div class="content">
		<p><a target="_blank" rel="noopener" href="http://zetcode.com/gui/pyqt5/menustoolbars/">翻译自原文：Menus and toolbars in PyQt5</a></p>
<p>翻译时间 2020 年 8 月 19 日</p>
<span id="more"></span>

<p>在 PyQt5 教程的这一部分中，我们创建一个状态栏、菜单栏和一个工具栏。</p>
<ul>
<li>  菜单是位于菜单栏中的一组命令。</li>
<li>  工具栏具有应用程序中带有一些常见命令的按钮。</li>
<li>  状态栏显示状态信息，通常在应用程序窗口的底部。</li>
</ul>
<h2 id="QmainWindow"><a href="#QmainWindow" class="headerlink" title="QmainWindow"></a>QmainWindow</h2><p><code>QMainWindow</code>类提供主应用程序窗口。这样可以创建具有状态栏、工具栏和菜单栏的经典应用程序骨架。</p>
<h2 id="状态栏"><a href="#状态栏" class="headerlink" title="状态栏"></a>状态栏</h2><p>状态栏是用于显示状态信息的部件。</p>
<p>statusbar.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QMainWindow, QApplication<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QMainWindow</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        self.initUI()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br>        self.statusBar().showMessage(<span class="hljs-string">&#x27;Ready&#x27;</span>)<br><br>        self.setGeometry(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">250</span>, <span class="hljs-number">150</span>)<br>        self.setWindowTitle(<span class="hljs-string">&#x27;Statusbar&#x27;</span>)<br>        self.show()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>状态栏是在<code>QMainWindow</code>部件的帮助下创建的。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">self.statusBar().showMessage(&#x27;Ready&#x27;)<br></code></pre></td></tr></table></figure>

<p>为了获取状态栏，我们调用<code>QtWidgets.QMainWindow</code>类的<code>statusBar()</code>方法。方法的首次调用将创建一个状态栏，后续调用返回状态栏对象。<code>showMessage()</code>在状态栏上显示一条消息。</p>
<h2 id="PyQt5-简易菜单"><a href="#PyQt5-简易菜单" class="headerlink" title="PyQt5 简易菜单"></a>PyQt5 简易菜单</h2><p>菜单栏是 GUI 应用程序的常见部分，它是一组位于各种菜单中的命令。（Mac OS 对菜单栏的对待方式不同。为了获得类似的结果，我们可以添加以下行：<code>menubar.setNativeMenuBar(False)</code> ）</p>
<p>simple_menu.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">import sys<br>from PyQt5.QtWidgets import QMainWindow, QAction, qApp, QApplication<br>from PyQt5.QtGui import QIcon<br>from PyQt5.QtCore import QFileInfo<br><br><br>class Example(QMainWindow):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br><br>        root = QFileInfo(__file__).absolutePath()<br>        exitAct = QAction(QIcon(root + &#x27;/exit.png&#x27;), &#x27;&amp;Exit&#x27;, self)<br>        exitAct.setShortcut(&#x27;Ctrl+Q&#x27;)<br>        exitAct.setStatusTip(&#x27;Exit application&#x27;)<br>        exitAct.triggered.connect(qApp.quit)<br><br>        self.statusBar()<br><br>        menubar = self.menuBar()<br>        fileMenu = menubar.addMenu(&#x27;&amp;File&#x27;)<br>        fileMenu.addAction(exitAct)<br><br>        self.setGeometry(300, 300, 300, 200)<br>        self.setWindowTitle(&#x27;Simple menu&#x27;)<br>        self.show()<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在上面的示例中，我们创建一个包含一个菜单的菜单栏。此菜单包含一个操作，如果选中，该操作将终止应用程序。还创建了状态栏。可以使用 Ctrl+Q 快捷方式访问该操作。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">root = QFileInfo(__file__).absolutePath()<br>exitAct = QAction(QIcon(root + &#x27;/exit.png&#x27;), &#x27;&amp;Exit&#x27;, self)<br>exitAct.setShortcut(&#x27;Ctrl+Q&#x27;)<br>exitAct.setStatusTip(&#x27;Exit application&#x27;)<br></code></pre></td></tr></table></figure>

<p><code>QAction</code>是使用菜单栏、工具栏或自定义键盘快捷方式<strong>执行的操作</strong>的<strong>抽象</strong>。在上面四行中，我们创建一个带有特定图标和”退出”标签的操作。此外，为此操作定义了一个快捷方式。第四行创建状态提示，当我们将鼠标指针悬停在菜单项上时，状态栏中将显示该提示。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">exitAct.triggered.connect(qApp.quit)<br></code></pre></td></tr></table></figure>

<p>当我们选择此特定操作时，将发出触发信号。信号连接到<code>QApplication</code>部件的<code>quit()</code>方法。这将终止应用程序。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">menubar = self.menuBar()<br>fileMenu = menubar.addMenu(&#x27;&amp;File&#x27;)<br>fileMenu.addAction(exitAction)<br></code></pre></td></tr></table></figure>

<p><code>menuBar()</code>方法创建一个菜单栏。我们使用<code>addMenu()</code>创建“File”菜单，并添加<code>addAction()</code>操作。</p>
<h2 id="PyQt5-子菜单"><a href="#PyQt5-子菜单" class="headerlink" title="PyQt5 子菜单"></a>PyQt5 子菜单</h2><p>子菜单是位于另一个菜单中的菜单。</p>
<p>submenu.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QMainWindow, QAction, QMenu, QApplication<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QMainWindow</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        self.initUI()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br><br>        menubar = self.menuBar()<br>        fileMenu = menubar.addMenu(<span class="hljs-string">&#x27;File&#x27;</span>)<br><br>        impMenu = QMenu(<span class="hljs-string">&#x27;Import&#x27;</span>, self)<br>        impAct = QAction(<span class="hljs-string">&#x27;Import mail&#x27;</span>, self)<br>        impMenu.addAction(impAct)<br><br>        newAct = QAction(<span class="hljs-string">&#x27;New&#x27;</span>, self)<br><br>        fileMenu.addAction(newAct)<br>        fileMenu.addMenu(impMenu)<br><br>        self.setGeometry(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>)<br>        self.setWindowTitle(<span class="hljs-string">&#x27;Submenu&#x27;</span>)<br>        self.show()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在示例中，我们有两个菜单项：一个位于”File”菜单中，另一个位于“File”的”Import”子菜单中。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">impMenu = QMenu(&#x27;Import&#x27;, self)<br></code></pre></td></tr></table></figure>

<p>使用<code>QMenu</code>创建新菜单。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">impAct = QAction(&#x27;Import mail&#x27;, self)<br>impMenu.addAction(impAct)<br></code></pre></td></tr></table></figure>

<p>使用<code>addAction()</code>将操作添加到子菜单中。</p>
<p><img src="/Menus-and-toolbars-in-PyQt5/image-20200819095428995.png" alt="image-20200819095428995"></p>
<center>图：子菜单</center>

 

<h2 id="PyQt5-复选菜单"><a href="#PyQt5-复选菜单" class="headerlink" title="PyQt5 复选菜单"></a>PyQt5 复选菜单</h2><p>在下面的示例中，我们创建一个可以选中和取消选中的菜单。</p>
<p>check_menu.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QMainWindow, QAction, QApplication<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QMainWindow</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        self.initUI()<br><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br><br>        self.statusbar = self.statusBar()<br>        self.statusbar.showMessage(<span class="hljs-string">&#x27;Ready&#x27;</span>)<br><br>        menubar = self.menuBar()<br>        viewMenu = menubar.addMenu(<span class="hljs-string">&#x27;View&#x27;</span>)<br><br>        viewStatAct = QAction(<span class="hljs-string">&#x27;View statusbar&#x27;</span>, self, checkable=<span class="hljs-literal">True</span>)<br>        viewStatAct.setStatusTip(<span class="hljs-string">&#x27;View statusbar&#x27;</span>)<br>        viewStatAct.setChecked(<span class="hljs-literal">True</span>)<br>        viewStatAct.triggered.connect(self.toggleMenu)<br><br>        viewMenu.addAction(viewStatAct)<br><br>        self.setGeometry(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>)<br>        self.setWindowTitle(<span class="hljs-string">&#x27;Check menu&#x27;</span>)<br>        self.show()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">toggleMenu</span>(<span class="hljs-params">self, state</span>):</span><br><br>        <span class="hljs-keyword">if</span> state:<br>            self.statusbar.show()<br>        <span class="hljs-keyword">else</span>:<br>            self.statusbar.hide()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>代码示例创建一个包含一个操作的”View”菜单，该操作显示或隐藏状态栏。当将菜单项选中时，状态栏可见。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">viewStatAct = QAction(&#x27;View statusbar&#x27;, self, checkable=True)<br></code></pre></td></tr></table></figure>

<p>通过<code>checkable</code>选项，我们创建一个可检查菜单。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">viewStatAct.setChecked(True)<br></code></pre></td></tr></table></figure>

<p>由于状态栏从一开始就可见，因此我们使用<code>setChecked()</code>方法将复选菜单设置为选中状态。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">def toggleMenu(self, state):<br><br>    if state:<br>        self.statusbar.show()<br>    else:<br>        self.statusbar.hide()<br></code></pre></td></tr></table></figure>

<p>根据操作的状态，我们显示或隐藏状态栏。</p>
<p><img src="/Menus-and-toolbars-in-PyQt5/image-20200819095908844.png" alt="image-20200819095908844"></p>
<center>图：复选菜单</center>

<h2 id="PyQt5-上下文菜单"><a href="#PyQt5-上下文菜单" class="headerlink" title="PyQt5 上下文菜单"></a>PyQt5 上下文菜单</h2><p>上下文菜单（也称为弹出式菜单）是出现在某些上下文中的命令列表（<strong>常见为右键菜单</strong>）。例如，在 浏览器中，当我们右键单击网页时，我们会获得上下文菜单，可以重新加载页面、返回或查看页面源。如果我们右键单击工具栏，我们会获得用于管理工具栏的另一个上下文菜单。</p>
<p>context_menu.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QMainWindow, qApp, QMenu, QApplication<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QMainWindow</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        self.initUI()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br>        self.setGeometry(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>)<br>        self.setWindowTitle(<span class="hljs-string">&#x27;Context menu&#x27;</span>)<br>        self.show()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">contextMenuEvent</span>(<span class="hljs-params">self, event</span>):</span><br>        cmenu = QMenu(self)<br><br>        newAct = cmenu.addAction(<span class="hljs-string">&quot;New&quot;</span>)<br>        openAct = cmenu.addAction(<span class="hljs-string">&quot;Open&quot;</span>)<br>        quitAct = cmenu.addAction(<span class="hljs-string">&quot;Quit&quot;</span>)<br>        action = cmenu.exec_(self.mapToGlobal(event.pos()))<br><br>        <span class="hljs-keyword">if</span> action == quitAct:<br>            qApp.quit()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>若要使用上下文菜单，我们必须重新实现<code>contextMenuEvent()</code>方法。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">action = cmenu.exec_(self.mapToGlobal(event.pos()))<br></code></pre></td></tr></table></figure>

<p>上下文菜单与<code>exec_()</code>方法一起显示。<code>event.pos()</code>从事件对象获取鼠标指针的坐标，并用<code>mapToGlobal()</code>方法将部件坐标转换为全局屏幕坐标。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">if action == quitAct:<br>    qApp.quit()<br></code></pre></td></tr></table></figure>

<p>如果从上下文菜单返回的操作等于退出操作，我们将终止应用程序。</p>
<h2 id="PyQt5-工具栏"><a href="#PyQt5-工具栏" class="headerlink" title="PyQt5 工具栏"></a>PyQt5 工具栏</h2><p>菜单对应用程序可以使用的所有命令进行分组。工具栏提供对最常用的命令的快速访问。</p>
<p>toolbar.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QMainWindow, QAction, qApp, QApplication<br><span class="hljs-keyword">from</span> PyQt5.QtGui <span class="hljs-keyword">import</span> QIcon<br><span class="hljs-keyword">from</span> PyQt5.QtCore <span class="hljs-keyword">import</span> QFileInfo<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QMainWindow</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        self.initUI()<br><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br>        root = QFileInfo(__file__).absolutePath()<br>        exitAct = QAction(QIcon(root + <span class="hljs-string">&#x27;/exit.png&#x27;</span>), <span class="hljs-string">&#x27;Exit&#x27;</span>, self)<br>        exitAct.setShortcut(<span class="hljs-string">&#x27;Ctrl+Q&#x27;</span>)<br>        exitAct.triggered.connect(qApp.quit)<br><br>        self.toolbar = self.addToolBar(<span class="hljs-string">&#x27;Exit&#x27;</span>)<br>        self.toolbar.addAction(exitAct)<br><br>        self.setGeometry(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>)<br>        self.setWindowTitle(<span class="hljs-string">&#x27;Toolbar&#x27;</span>)<br>        self.show()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在上面的示例中，我们创建一个简单的工具栏。工具栏有一个工具操作，一个退出操作，在触发时终止应用程序。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">root = QFileInfo(__file__).absolutePath()<br>exitAct = QAction(QIcon(root + &#x27;/exit.png&#x27;), &#x27;Exit&#x27;, self)<br>exitAct.setShortcut(&#x27;Ctrl+Q&#x27;)<br>exitAct.triggered.connect(qApp.quit)<br></code></pre></td></tr></table></figure>

<p>与上面的菜单栏示例类似，我们创建一个操作对象。对象具有标签、图标和快捷键绑定。<code>QtGui.QMainWindow</code>的<code>quit()</code>方法连接到操作对象的触发信号。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">self.toolbar = self.addToolBar(&#x27;Exit&#x27;)<br>self.toolbar.addAction(exitAction)<br></code></pre></td></tr></table></figure>

<p>使用<code>addToolBar()</code>方法创建工具栏。我们使用<code>addAction()</code>将操作对象添加到工具栏中。</p>
<p><img src="/Menus-and-toolbars-in-PyQt5/image-20200819101135395.png" alt="image-20200819101135395"></p>
<center>图：工具栏</center>

<h2 id="PyQt5-主窗口"><a href="#PyQt5-主窗口" class="headerlink" title="PyQt5 主窗口"></a>PyQt5 主窗口</h2><p>在本节的最后一个示例中，我们创建一个菜单栏、工具栏和状态栏，我们还创建一个中央部件。</p>
<p>main_window.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QMainWindow, QTextEdit, QAction, QApplication<br><span class="hljs-keyword">from</span> PyQt5.QtGui <span class="hljs-keyword">import</span> QIcon<br><span class="hljs-keyword">from</span> PyQt5.QtCore <span class="hljs-keyword">import</span> QFileInfo<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QMainWindow</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        self.initUI()<br><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br><br>        textEdit = QTextEdit()<br>        self.setCentralWidget(textEdit)<br><br>        root = QFileInfo(__file__).absolutePath()<br>        exitAct = QAction(QIcon(root + <span class="hljs-string">&#x27;/exit.png&#x27;</span>), <span class="hljs-string">&#x27;Exit&#x27;</span>, self)<br>        exitAct.setShortcut(<span class="hljs-string">&#x27;Ctrl+Q&#x27;</span>)<br>        exitAct.setStatusTip(<span class="hljs-string">&#x27;Exit application&#x27;</span>)<br>        exitAct.triggered.connect(self.close)<br><br>        self.statusBar()<br><br>        menubar = self.menuBar()<br>        fileMenu = menubar.addMenu(<span class="hljs-string">&#x27;&amp;File&#x27;</span>)<br>        fileMenu.addAction(exitAct)<br><br>        toolbar = self.addToolBar(<span class="hljs-string">&#x27;Exit&#x27;</span>)<br>        toolbar.addAction(exitAct)<br><br>        self.setGeometry(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">350</span>, <span class="hljs-number">250</span>)<br>        self.setWindowTitle(<span class="hljs-string">&#x27;Main window&#x27;</span>)<br>        self.show()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>此代码示例使用菜单栏、工具栏和状态栏创建经典 GUI 应用程序的骨架。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">textEdit = QTextEdit()<br>self.setCentralWidget(textEdit)<br></code></pre></td></tr></table></figure>

<p>在这里，我们创建一个文本编辑部件，并将其设置为<code>QMainWindow</code>的中心部件。中央部件占用所有剩下的空间。</p>
<p><img src="/Menus-and-toolbars-in-PyQt5/image-20200819101604469.png" alt="image-20200819101604469"></p>
<center>图：主窗口</center>

<p>在 PyQt5 教程的这一部分中，我们使用菜单、工具栏、状态栏和主应用程序窗口。</p>

	</div>
</div>
<!-- 返回顶部模块 -->
<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;font-size:26px;background-color:#8590a6">
	<a title="返回顶部" style="color:#04fa9f"><⇧></a>
</div>
<script src="/js/totop.js"></script>

  </body>

</html>