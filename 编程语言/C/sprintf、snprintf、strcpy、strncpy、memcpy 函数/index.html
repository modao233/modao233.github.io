<!DOCTYPE html>
<html>
<!-- html页面布局的head -->

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<title>
		modao
	</title>

	<!-- 百度统计代码 -->
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?902dc461fe0d25f09e74e0d04677b6d8";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-N2WTGJE0M5"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-N2WTGJE0M5');
	</script>
<meta name="generator" content="Hexo 5.4.0"></head>

  <body>

    <!-- 文章详情页模板 -->

<!-- 主页标题栏 -->

<link rel="stylesheet" href="/css/navigatebar.css">


<header class="header">
	<div class="topbar">
		<div class="topbar-button topbar-mine">
			<a href="/">
				modao
			</a>
		</div>
		
			<div class="topbar-button">
				<a href="/">
					Home
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/categories">
					Categories
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/links">
					Friends
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/sites">
					Sites
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/stars">
					Stars
				</a>
			</div>
		

	</div>
	<div class="slogan">
		「工作日还有多少天，休息日还剩几小时」
	</div>
</header>


<link rel="stylesheet" href="/css/font.css">


<link rel="stylesheet" href="/css/post.css" media="screen and (min-width: 600px)">


<link rel="stylesheet" href="/css/post_mobile.css" media="screen and (max-width: 600px)">


<link rel="stylesheet" href="/css/highlight.css">




<div class="toc">
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#sprintf%E5%87%BD%E6%95%B0"><span class="toc-text">sprintf函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#snprintf%E5%87%BD%E6%95%B0"><span class="toc-text">snprintf函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strcpy%E5%87%BD%E6%95%B0"><span class="toc-text">strcpy函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strncpy%E5%87%BD%E6%95%B0"><span class="toc-text">strncpy函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#memcpy%E5%87%BD%E6%95%B0"><span class="toc-text">memcpy函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%BA%E5%88%AB%E8%A7%A3%E6%9E%90"><span class="toc-text">区别解析</span></a></li></ol>
</div>

<div class="content-area">
	<div class="title">
		sprintf、snprintf、strcpy、strncpy、memcpy 函数
	</div>
	
	<div class="page-date">
		2021-12-04
	</div>
	
	<div class="category-area">
		
			 
				「
				<div class="category">
					<a href="/categories/C">C</a>
				
				</div>
				」
			
		
	</div>
	
	<div class="content">
		<p>sprintf、snprintf、strcpy、strncpy、memcpy 函数</p>
<span id="more"></span>

<p>安全版本：指定了操作字符的个数</p>
<h2 id="sprintf函数"><a href="#sprintf函数" class="headerlink" title="sprintf函数"></a>sprintf函数</h2><figure class="highlight c"><table><tr><td class="code"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">sprintf</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *buffer, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *format, [argument] ... )</span></span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>  功能：将格式化的数据写入某个字符串缓冲区</li>
<li>  入参：format，输出字符串的格式化列表，比如%d、%s、%c等</li>
<li>  入参：[argument]对应的不定参数列表，与printf类似</li>
<li>  出参：buffer，指向一段存储空间，用于存储格式化之后的字符串</li>
<li>  返回值：返回写入buffer的字符数，出错则返回-1</li>
</ul>
<h2 id="snprintf函数"><a href="#snprintf函数" class="headerlink" title="snprintf函数"></a>snprintf函数</h2><p>snprintf是sprintf的安全版本</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">snprintf</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *buffer, <span class="hljs-keyword">size_t</span> size, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *format, [argument] ... )</span></span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>  功能：有长度限制地，把格式化的数据写入某个字符串缓冲区</li>
<li>  入参：format，输出字符串的格式化列表，比如”%s %d %c”等</li>
<li>  入参：[argument]，format对应的不定参数列表，与printf的不定入参类似</li>
<li>  入参：size，表示buffer指向存储空间的大小</li>
<li>  出参：buffer，指向一段存储空间，用于存储格式化之后的字符串</li>
<li>返回值：返回写入buffer 的字符数，出错则返回-1<ul>
<li>  如果 buffer 或 format 是空指针，且不出错而继续，函数将返回-1，并且 errno 会被设置为 EINVAL</li>
</ul>
</li>
</ul>
<h2 id="strcpy函数"><a href="#strcpy函数" class="headerlink" title="strcpy函数"></a>strcpy函数</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs cpp+">char *strcpy(char *dest, const char *src);<br></code></pre></td></tr></table></figure>

<ul>
<li>  功能：将参数src字符串拷贝至参数dest所指的地址，会自动给dest字符串补结束符’\0’；</li>
<li>  返回值：返回dest的字符串的起始地址；</li>
<li>  说明：如果参数dest所指向的内存空间不够大，可能会造成缓冲溢出的错误情况（同sprintf）。</li>
</ul>
<h2 id="strncpy函数"><a href="#strncpy函数" class="headerlink" title="strncpy函数"></a>strncpy函数</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">char</span> *<span class="hljs-title">strncpy</span><span class="hljs-params">(<span class="hljs-keyword">char</span> *dest, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * src, <span class="hljs-keyword">size_t</span> n)</span></span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>  函数说明：strncpy()会将字符串src的前n个字符拷贝到字符串dest;</li>
<li>  返回值：返回字符串dest</li>
<li>  注意：strncpy()不会像strcpy那样向dest追加结束符，但是它可以拷贝结束符，结束符之后的字符不能够拷贝，src和dest所指向的内存区域不能重叠，且dest必须由足够大的空间放置n个字符</li>
</ul>
<h2 id="memcpy函数"><a href="#memcpy函数" class="headerlink" title="memcpy函数"></a>memcpy函数</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">memcpy</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *dest, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *src, <span class="hljs-keyword">size_t</span> n)</span></span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>  功能：将src指向地址为起始地址的连续n个字节的数据复制到以dest指向地址为起始地址的空间内</li>
<li>  返回值：返回一个指向dest的指针</li>
<li>  注意：src和dest所指向的内存区域不能重叠；与strcpy相比，memcpy并不是遇到结束符就停止拷贝，而是一定会拷贝完n个字节</li>
</ul>
<h2 id="区别解析"><a href="#区别解析" class="headerlink" title="区别解析"></a>区别解析</h2><table>
<thead>
<tr>
<th>函数名称</th>
<th>操作对象</th>
<th>简单分析</th>
</tr>
</thead>
<tbody><tr>
<td>strcpy</td>
<td>对字符串进行操作</td>
<td>调用简单，效率较高</td>
</tr>
<tr>
<td>sprintf</td>
<td>操作对象可以是字符串，但不限于字符串，可以是任意基本类型</td>
<td>需要对指定格式符并且进行格式转换，调用较为烦琐且效率不高</td>
</tr>
<tr>
<td>memcpy</td>
<td>对内存的拷贝，不考虑类型</td>
<td>高效，但需指定拷贝内存的长度</td>
</tr>
</tbody></table>

	</div>
</div>
<!-- 返回顶部模块 -->
<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;font-size:26px;background-color:#8590a6">
	<a title="返回顶部" style="color:#04fa9f"><⇧></a>
</div>
<script src="/js/totop.js"></script>

  </body>

</html>