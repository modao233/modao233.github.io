<!doctype html><html lang=zh-Hans-CN><head><title>modao's blog</title><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><meta content=noodp name=robots><link href=https://modao.site/style.css rel=stylesheet><link href=https://modao.site/color/green.css rel=stylesheet><link href=https://modao.site/color/background_dark.css rel=stylesheet><link href=https://modao.site/font-hack.css rel=stylesheet><script src="https://www.googletagmanager.com/gtag/js?id=G-N2WTGJE0M5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-N2WTGJE0M5');</script><body><div class=container><header class=header><div class=header__inner><div class=header__logo><a style="text-decoration: none;" href=https://modao.site> <div class=logo>MODAO</div> </a></div></div><nav class=menu><ul class=menu__inner><li class=active><a href=https://modao.site>Home</a><li><a href=https://modao.site/tags>Tags</a><li><a href=https://modao.site/language>Programming-Language</a><li><a href=https://modao.site/books>Books</a><li><a href=https://modao.site/links>Links</a><li><a href=https://modao.site/friend>Friend</a></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://modao.site/编程语言/Python/pythonpa-chong-ji-lu-cai-guo-de-yi-xie-keng/>python爬虫-记录踩过的一些坑</a></h1><div class=post-meta-inline><span class=post-date> 2019-11-10 </span></div><div class=post-content><p>python爬虫-记录踩过的一些坑<h2 id=zheng-shu-bu-an-quan>证书不安全</h2><p><a href=https://www.cnblogs.com/zrmw/p/9869210.html>InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised.解决办法</a><pre class=language-python data-lang=python style=background-color:#2b303b;color:#c0c5ce;><code class=language-python data-lang=python><span style=color:#b48ead;>import </span><span>urllib3
</span><span>urllib3.</span><span style=color:#bf616a;>disable_warnings</span><span>()
</span></code></pre><h2 id=shi-yong-rezheng-ze-biao-da-shi-pi-pei-shi-de-cuo-wu>使用re正则表达式匹配时的错误</h2><p>报错信息：<pre style=background-color:#2b303b;color:#c0c5ce;><code><span>File “C:\Python35\lib\re.py”, line 213, in findall
</span><span>return _compile(pattern, flags).findall(string)
</span><span>TypeError: cannot use a string pattern on a bytes-like object
</span></code></pre><p>出错的主要原因是因为：<pre style=background-color:#2b303b;color:#c0c5ce;><code><span>TypeError: can’t use a string pattern on a bytes-like object.
</span><span>html用decode(‘utf-8’)进行解码，由bytes变成string。
</span><span>py3的urlopen返回的不是string是bytes。
</span></code></pre><h2 id=pythonzhong-appendyu-extendde-yong-fa-qu-bie>Python中append与extend的用法区别</h2><p>append整体添加<pre class=language-python data-lang=python style=background-color:#2b303b;color:#c0c5ce;><code class=language-python data-lang=python><span>l1 = [</span><span style=color:#d08770;>1</span><span>, </span><span style=color:#d08770;>2</span><span>, </span><span style=color:#d08770;>3</span><span>, </span><span style=color:#d08770;>4</span><span>, </span><span style=color:#d08770;>5</span><span>, ]
</span><span>l1.</span><span style=color:#bf616a;>append</span><span>([</span><span style=color:#d08770;>6</span><span>, </span><span style=color:#d08770;>7</span><span>, </span><span style=color:#d08770;>8</span><span>, </span><span style=color:#d08770;>9</span><span>, ])
</span><span style=color:#65737e;># l1.append(*[6, 7, 8, 9, ]) #会报错
</span><span style=color:#96b5b4;>print</span><span>(l1)
</span><span>l1.</span><span style=color:#bf616a;>extend</span><span>([</span><span style=color:#d08770;>6</span><span>, </span><span style=color:#d08770;>7</span><span>, </span><span style=color:#d08770;>8</span><span>, </span><span style=color:#d08770;>9</span><span>])
</span><span style=color:#96b5b4;>print</span><span>(l1)
</span></code></pre><p>只能接受一个参数，如果出现打散的情况，还是会被识别成多个参数，因为程序执行执行是从左到右，从上倒下执行的，当出现时这个列表已经被打散了，因而，会被程序识别成被传入了多个参数<p>extend逐个添加<pre class=language-python data-lang=python style=background-color:#2b303b;color:#c0c5ce;><code class=language-python data-lang=python><span>l1 = [</span><span style=color:#d08770;>1</span><span>, </span><span style=color:#d08770;>2</span><span>, </span><span style=color:#d08770;>3</span><span>, </span><span style=color:#d08770;>4</span><span>, </span><span style=color:#d08770;>5</span><span>, ]
</span><span>l1.</span><span style=color:#bf616a;>extend</span><span>([</span><span style=color:#d08770;>6</span><span>, </span><span style=color:#d08770;>7</span><span>, </span><span style=color:#d08770;>8</span><span>, </span><span style=color:#d08770;>9</span><span>])
</span><span style=color:#96b5b4;>print</span><span>(l1)
</span><span>l1.</span><span style=color:#bf616a;>extend</span><span>('</span><span style=color:#a3be8c;>abc</span><span>')
</span><span style=color:#96b5b4;>print</span><span>(l1)
</span><span>l1.</span><span style=color:#bf616a;>extend</span><span>('</span><span style=color:#a3be8c;>a</span><span>') </span><span style=color:#65737e;># 也是可迭代对象
</span><span style=color:#96b5b4;>print</span><span>(l1)
</span><span style=color:#65737e;># l1.extend(1) # 报错，不可迭代
</span><span style=color:#96b5b4;>print</span><span>(l1)
</span><span>
</span><span style=color:#65737e;># 输出
</span><span>
</span><span>[</span><span style=color:#d08770;>1</span><span>, </span><span style=color:#d08770;>2</span><span>, </span><span style=color:#d08770;>3</span><span>, </span><span style=color:#d08770;>4</span><span>, </span><span style=color:#d08770;>5</span><span>, </span><span style=color:#d08770;>6</span><span>, </span><span style=color:#d08770;>7</span><span>, </span><span style=color:#d08770;>8</span><span>, </span><span style=color:#d08770;>9</span><span>]
</span><span>[</span><span style=color:#d08770;>1</span><span>, </span><span style=color:#d08770;>2</span><span>, </span><span style=color:#d08770;>3</span><span>, </span><span style=color:#d08770;>4</span><span>, </span><span style=color:#d08770;>5</span><span>, </span><span style=color:#d08770;>6</span><span>, </span><span style=color:#d08770;>7</span><span>, </span><span style=color:#d08770;>8</span><span>, </span><span style=color:#d08770;>9</span><span>, '</span><span style=color:#a3be8c;>a</span><span>', '</span><span style=color:#a3be8c;>b</span><span>', '</span><span style=color:#a3be8c;>c</span><span>']
</span><span>[</span><span style=color:#d08770;>1</span><span>, </span><span style=color:#d08770;>2</span><span>, </span><span style=color:#d08770;>3</span><span>, </span><span style=color:#d08770;>4</span><span>, </span><span style=color:#d08770;>5</span><span>, </span><span style=color:#d08770;>6</span><span>, </span><span style=color:#d08770;>7</span><span>, </span><span style=color:#d08770;>8</span><span>, </span><span style=color:#d08770;>9</span><span>, '</span><span style=color:#a3be8c;>a</span><span>', '</span><span style=color:#a3be8c;>b</span><span>', '</span><span style=color:#a3be8c;>c</span><span>', '</span><span style=color:#a3be8c;>a</span><span>']
</span><span>[</span><span style=color:#d08770;>1</span><span>, </span><span style=color:#d08770;>2</span><span>, </span><span style=color:#d08770;>3</span><span>, </span><span style=color:#d08770;>4</span><span>, </span><span style=color:#d08770;>5</span><span>, </span><span style=color:#d08770;>6</span><span>, </span><span style=color:#d08770;>7</span><span>, </span><span style=color:#d08770;>8</span><span>, </span><span style=color:#d08770;>9</span><span>, '</span><span style=color:#a3be8c;>a</span><span>', '</span><span style=color:#a3be8c;>b</span><span>', '</span><span style=color:#a3be8c;>c</span><span>', '</span><span style=color:#a3be8c;>a</span><span>']
</span></code></pre><p>extend在执行添加的时候，被传入的参数必须是<strong>可迭代对象</strong>，这样通过迭代就解决了同时传入多个参数的问题，如果你还不知道可迭代对象，放心，你很快就会知道的<h2 id=selenium-pythonzi-dong-hua-ce-shi-zhi-ye-mian-yuan-su-ding-wei>selenium+python自动化测试之页面元素定位</h2><p><a href=http://blog.sina.com.cn/s/blog_aed19c1f0102wl0y.html>通过xpath相对路径查找元素方法</a><p><a href=https://www.cnblogs.com/kenD/p/11192657.html>selenium 操作 获取动态页面数据</a><p><a href=https://www.cnblogs.com/zhenwei66/p/8406201.html>Python之excel文件追加内容</a><pre class=language-python data-lang=python style=background-color:#2b303b;color:#c0c5ce;><code class=language-python data-lang=python><span style=color:#65737e;>#!/usr/bin/env python
</span><span style=color:#65737e;># -*- coding:utf-8 -*-
</span><span>
</span><span style=color:#b48ead;>from </span><span>xlrd </span><span style=color:#b48ead;>import </span><span>open_workbook
</span><span style=color:#b48ead;>from </span><span>xlutils.copy </span><span style=color:#b48ead;>import </span><span>copy
</span><span>
</span><span>r_xls = </span><span style=color:#bf616a;>open_workbook</span><span>("</span><span style=color:#a3be8c;>test.xls</span><span>") </span><span style=color:#65737e;># 读取excel文件
</span><span>row = r_xls.</span><span style=color:#bf616a;>sheets</span><span>()[</span><span style=color:#d08770;>0</span><span>].nrows </span><span style=color:#65737e;># 获取已有的行数
</span><span>excel = </span><span style=color:#bf616a;>copy</span><span>(r_xls) </span><span style=color:#65737e;># 将xlrd的对象转化为xlwt的对象
</span><span>table = excel.</span><span style=color:#bf616a;>get_sheet</span><span>(</span><span style=color:#d08770;>0</span><span>) </span><span style=color:#65737e;># 获取要操作的sheet
</span><span>
</span><span style=color:#65737e;>#对excel表追加一行内容
</span><span>table.</span><span style=color:#bf616a;>write</span><span>(row, </span><span style=color:#d08770;>0</span><span>, '</span><span style=color:#a3be8c;>内容1</span><span>') </span><span style=color:#65737e;>#括号内分别为行数、列数、内容
</span><span>table.</span><span style=color:#bf616a;>write</span><span>(row, </span><span style=color:#d08770;>1</span><span>, '</span><span style=color:#a3be8c;>内容2</span><span>')
</span><span>table.</span><span style=color:#bf616a;>write</span><span>(row, </span><span style=color:#d08770;>2</span><span>, '</span><span style=color:#a3be8c;>内容3</span><span>')
</span><span>
</span><span>excel.</span><span style=color:#bf616a;>save</span><span>("</span><span style=color:#a3be8c;>test.xls</span><span>") </span><span style=color:#65737e;># 保存并覆盖文件
</span></code></pre></div></div></div><footer class=footer__poweredby><p class=caption>© 2022 All Rights Reserved modao::rustacean@aliyun.com<p class=caption>© Powered by <a href=https://www.getzola.org/>Zola</a><p class=caption>© Theme: <a href=https://github.com/pawroman/zola-theme-terminimal/>Terminimal</a> by pawroman<p class=caption><a href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh rel=license>自由转载-非商用-非衍生-保持署名</a></footer></div>