<!DOCTYPE html>
<html>
<!-- html页面布局的head -->

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<title>
		modao
	</title>

	<!-- 百度统计代码 -->
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?902dc461fe0d25f09e74e0d04677b6d8";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-N2WTGJE0M5"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-N2WTGJE0M5');
	</script>
<meta name="generator" content="Hexo 5.4.0"></head>

  <body>

    <!-- 文章详情页模板 -->

<!-- 主页标题栏 -->

<link rel="stylesheet" href="/css/navigatebar.css">


<header class="header">
	<div class="topbar">
		<div class="topbar-button topbar-mine">
			<a href="/">
				modao
			</a>
		</div>
		
			<div class="topbar-button">
				<a href="/">
					Home
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/categories">
					Categories
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/links">
					Friends
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/sites">
					Sites
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/stars">
					Stars
				</a>
			</div>
		

	</div>
	<div class="slogan">
		「工作日还有多少天，休息日还剩几小时」
	</div>
</header>


<link rel="stylesheet" href="/css/font.css">


<link rel="stylesheet" href="/css/post.css" media="screen and (min-width: 600px)">


<link rel="stylesheet" href="/css/post_mobile.css" media="screen and (max-width: 600px)">


<link rel="stylesheet" href="/css/highlight.css">




<div class="toc">
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%9D%E5%AF%B9%E5%AE%9A%E4%BD%8D"><span class="toc-text">绝对定位</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-QHBoxLayout"><span class="toc-text">PyQt5 QHBoxLayout</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-QGridLayout"><span class="toc-text">PyQt5 QGridLayout</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Review-%E7%A4%BA%E4%BE%8B"><span class="toc-text">Review 示例</span></a></li></ol>
</div>

<div class="content-area">
	<div class="title">
		PyQt5 中的布局管理
	</div>
	
	<div class="page-date">
		2020-08-19
	</div>
	
	<div class="category-area">
		
			 
				「
				<div class="category">
					<a href="/categories/python">python</a>
				
				</div>
				」
			 
				「
				<div class="category">
					<a href="/categories/PyQt5">PyQt5</a>
				
				</div>
				」
			
		
	</div>
	
	<div class="content">
		<p><a target="_blank" rel="noopener" href="http://zetcode.com/gui/pyqt5/layout/">翻译自原文：Layout management in PyQt5</a></p>
<p>翻译时间 2020 年 8 月 19 日</p>
<span id="more"></span>

<p>布局管理是部件在应用程序窗口上的排放方式。我们可以使用绝对定位或<strong>布局类</strong>放置我们的部件。使用布局管理器管理布局是组织部件的首选方式。</p>
<h2 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h2><p>程序员指定每个部件的位置和大小（以像素为单位）。当使用绝对定位时，我们必须了解以下限制：</p>
<ul>
<li>  如果我们调整窗口大小，部件的大小和位置不会改变</li>
<li>  应用程序在各种平台上可能看起来不同</li>
<li>  更改应用程序中的字体可能会破坏布局</li>
<li>  如果我们决定改变我们的布局，我们必须完全重做我们的布局，这是乏味和耗时的</li>
</ul>
<p>下面的示例将小部件定位在绝对坐标中。</p>
<p>absolute.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">import sys<br>from PyQt5.QtWidgets import QWidget, QLabel, QApplication<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        lbl1 = QLabel(&#x27;ZetCode&#x27;, self)<br>        lbl1.move(15, 10)<br><br>        lbl2 = QLabel(&#x27;tutorials&#x27;, self)<br>        lbl2.move(35, 40)<br><br>        lbl3 = QLabel(&#x27;for programmers&#x27;, self)<br>        lbl3.move(55, 70)<br><br>        self.setGeometry(300, 300, 250, 150)<br>        self.setWindowTitle(&#x27;Absolute&#x27;)<br>        self.show()<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>我们使用<code>move()</code>方法来定位我们的部件。在我们的案例中，这些是标签。我们通过提供 x 和 y 坐标来定位它们。坐标系的开头位于左上角。x 值从左到右增长。y 值从上到下增长。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">lbl1 = QLabel(&#x27;ZetCode&#x27;, self)<br>lbl1.move(15, 10)<br></code></pre></td></tr></table></figure>

<p>标签小部件位于<code>x=15</code>和<code>y=10</code>。</p>
<p><img src="image-20200819104258956.png" alt="image-20200819104258956"></p>
<center>图：绝对定位</center>

<h2 id="PyQt5-QHBoxLayout"><a href="#PyQt5-QHBoxLayout" class="headerlink" title="PyQt5 QHBoxLayout"></a>PyQt5 QHBoxLayout</h2><p><code>QHBoxLayout</code>和<code>QVBoxLayout</code>是水平和垂直排列部件的基本布局类。</p>
<p>假设我们想要在右下角放置两个按钮。要创建这样的布局，我们使用一个水平和一个垂直框。为了创造必要的空间，我们增加了一个<strong>拉伸因子</strong>。</p>
<p>box_layout.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">import sys<br>from PyQt5.QtWidgets import (QWidget, QPushButton,<br>                             QHBoxLayout, QVBoxLayout, QApplication)<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br><br>        okButton = QPushButton(&quot;OK&quot;)<br>        cancelButton = QPushButton(&quot;Cancel&quot;)<br><br>        hbox = QHBoxLayout()<br>        hbox.addStretch(1)<br>        hbox.addWidget(okButton)<br>        hbox.addWidget(cancelButton)<br><br>        vbox = QVBoxLayout()<br>        vbox.addStretch(1)<br>        vbox.addLayout(hbox)<br><br>        self.setLayout(vbox)<br><br>        self.setGeometry(300, 300, 300, 150)<br>        self.setWindowTitle(&#x27;Buttons&#x27;)<br>        self.show()<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>该示例将两个按钮放在窗口的右下角。当我们调整应用程序窗口的大小时，它们会留在那里。我们同时使用<code>HBoxLayout</code> 和 <code>QVBoxLayout</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">okButton = QPushButton(&quot;OK&quot;)<br>cancelButton = QPushButton(&quot;Cancel&quot;)<br></code></pre></td></tr></table></figure>

<p>在这里，我们创建两个按钮。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">hbox = QHBoxLayout()<br>hbox.addStretch(1)<br>hbox.addWidget(okButton)<br>hbox.addWidget(cancelButton)<br></code></pre></td></tr></table></figure>

<p>我们创建一个水平框布局，并添加拉伸因子和两个按钮。拉伸在两个按钮之前添加一个可拉伸的空间。这会将它们推到窗口的右侧。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">vbox = QVBoxLayout()<br>vbox.addStretch(1)<br>vbox.addLayout(hbox)<br></code></pre></td></tr></table></figure>

<p>水平布局将放入垂直布局中。垂直框中的拉伸系数将按带有按钮的水平框到窗口的底部。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">self.setLayout(vbox)<br></code></pre></td></tr></table></figure>

<p>最后，我们设置了窗口的主布局。</p>
<p><img src="image-20200819104612728.png" alt="image-20200819104612728"></p>
<center>图：按钮</center> 

<h2 id="PyQt5-QGridLayout"><a href="#PyQt5-QGridLayout" class="headerlink" title="PyQt5 QGridLayout"></a>PyQt5 QGridLayout</h2><p>栅格布局类<code>QGridLayout</code>是最通用的布局类。它将空间划分为行和列。</p>
<p>calculator.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">import sys<br>from PyQt5.QtWidgets import (QWidget, QGridLayout,<br>                             QPushButton, QApplication)<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br><br>        grid = QGridLayout()<br>        self.setLayout(grid)<br><br>        names = [&#x27;Cls&#x27;, &#x27;Bck&#x27;, &#x27;&#x27;, &#x27;Close&#x27;,<br>                 &#x27;7&#x27;, &#x27;8&#x27;, &#x27;9&#x27;, &#x27;/&#x27;,<br>                 &#x27;4&#x27;, &#x27;5&#x27;, &#x27;6&#x27;, &#x27;*&#x27;,<br>                 &#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;-&#x27;,<br>                 &#x27;0&#x27;, &#x27;.&#x27;, &#x27;=&#x27;, &#x27;+&#x27;]<br><br>        positions = [(i, j) for i in range(5) for j in range(4)]<br><br>        for position, name in zip(positions, names):<br><br>            if name == &#x27;&#x27;:<br>                continue<br>            button = QPushButton(name)<br>            grid.addWidget(button, *position)<br><br>        self.move(300, 150)<br>        self.setWindowTitle(&#x27;Calculator&#x27;)<br>        self.show()<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在我们的示例中，我们创建一个按钮网格。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">grid = QGridLayout()<br>self.setLayout(grid)<br></code></pre></td></tr></table></figure>

<p>创建<code>QGridLayout</code>的实例并设置为应用程序窗口的布局。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">names = [&#x27;Cls&#x27;, &#x27;Bck&#x27;, &#x27;&#x27;, &#x27;Close&#x27;,<br>         &#x27;7&#x27;, &#x27;8&#x27;, &#x27;9&#x27;, &#x27;/&#x27;,<br>         &#x27;4&#x27;, &#x27;5&#x27;, &#x27;6&#x27;, &#x27;*&#x27;,<br>         &#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;-&#x27;,<br>         &#x27;0&#x27;, &#x27;.&#x27;, &#x27;=&#x27;, &#x27;+&#x27;]<br></code></pre></td></tr></table></figure>

<p>这些是以后用于按钮的标签。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">positions = [(i,j) for i in range(5) for j in range(4)]<br></code></pre></td></tr></table></figure>

<p>我们创建网格中的位置列表。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">for position, name in zip(positions, names):<br>    <br>    if name == &#x27;&#x27;:<br>        continue<br>    button = QPushButton(name)<br>    grid.addWidget(button, *position)<br></code></pre></td></tr></table></figure>

<p>创建按钮并使用<code>addWidget()</code>方法将按钮添加到布局中。</p>
<p><img src="image-20200819105047246.png" alt="image-20200819105047246"></p>
<center>图：计算器骨架</center>

<h2 id="Review-示例"><a href="#Review-示例" class="headerlink" title="Review 示例"></a>Review 示例</h2><p>部件可以跨越网格中的多个列或行。在下面的示例中，我们说明了这一点。</p>
<p>review.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">import sys<br>from PyQt5.QtWidgets import (QWidget, QLabel, QLineEdit,<br>                             QTextEdit, QGridLayout, QApplication)<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        title = QLabel(&#x27;Title&#x27;)<br>        author = QLabel(&#x27;Author&#x27;)<br>        review = QLabel(&#x27;Review&#x27;)<br><br>        titleEdit = QLineEdit()<br>        authorEdit = QLineEdit()<br>        reviewEdit = QTextEdit()<br><br>        grid = QGridLayout()<br>        grid.setSpacing(10)<br><br>        grid.addWidget(title, 1, 0)<br>        grid.addWidget(titleEdit, 1, 1)<br><br>        grid.addWidget(author, 2, 0)<br>        grid.addWidget(authorEdit, 2, 1)<br><br>        grid.addWidget(review, 3, 0)<br>        grid.addWidget(reviewEdit, 3, 1, 5, 1)<br><br>        self.setLayout(grid)<br><br>        self.setGeometry(300, 300, 350, 300)<br>        self.setWindowTitle(&#x27;Review&#x27;)<br>        self.show()<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>我们创建一个窗口，其中我们有三个标签，两个行编辑和一个文本编辑小部件。布局使用<code>QGridLayout</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">grid = QGridLayout()<br>grid.setSpacing(10)<br></code></pre></td></tr></table></figure>

<p>我们创建网格布局并在部件之间设置间距。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">grid.addWidget(reviewEdit, 3, 1, 5, 1)<br></code></pre></td></tr></table></figure>

<p>如果我们向网格添加部件，我们可以提供部件的行范围和列范围。在我们的案例中，我们使<code>reviewEdit</code>部件跨越 5 行。</p>
<p><img src="image-20200819105433312.png" alt="image-20200819105433312"></p>
<center>图：查看示例</center>

<p>PyQt5 教程的这一部分专门介绍布局管理。</p>

	</div>
</div>
<!-- 返回顶部模块 -->
<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;font-size:26px;background-color:#8590a6">
	<a title="返回顶部" style="color:#04fa9f"><⇧></a>
</div>
<script src="/js/totop.js"></script>

  </body>

</html>