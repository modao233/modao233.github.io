<!doctype html><html lang=zh-Hans-CN><head><title>modao's blog</title><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><meta content=noodp name=robots><link href=https://modao.site/style.css rel=stylesheet><link href=https://modao.site/color/green.css rel=stylesheet><link href=https://modao.site/color/background_dark.css rel=stylesheet><link href=https://modao.site/font-hack.css rel=stylesheet><body><div class=container><header class=header><div class=header__inner><div class=header__logo><a style="text-decoration: none;" href=https://modao.site> <div class=logo>MODAO</div> </a></div></div><nav class=menu><ul class=menu__inner><li class=active><a href=https://modao.site>Home</a><li><a href=https://modao.site/tags>Tags</a><li><a href=https://modao.site/language>Programming-Language</a><li><a href=https://modao.site/books>Books</a><li><a href=https://modao.site/links>Links</a><li><a href=https://modao.site/friend>Friend</a><li><a href=https://modao.site/about>About Me</a></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://modao.site/Software/Proxy/pcduan-discordshe-zhi-dai-li/>win10-PC端Discord设置代理</a></h1><div class=post-meta-inline><span class=post-date> 2020-06-06 </span></div><span class=post-tags-inline> :: tags:  <a class=post-tag href=https://modao.site/tags/proxy/>#Proxy</a></span><div class=post-content><p>转自 爱琴炫彩，知乎原文地址：https://zhuanlan.zhihu.com/p/47048247<p>本文是Discord的PC客户端单独设置代理的方法。主要解决开PAC模式进不了Discord，又不想开全局模式的问题。<p>如果你没有代理，请不用向下读了。<h2 id=1-she-zhi-update-exede-dai-li>1. 设置Update.exe的代理</h2><p>桌面的Discord图标并不直接启动Discord.exe，而是先运行Update.exe程序进行升级检测，然后才启动Discord.exe，所以要先把Update.exe设置代理。<p>先看看这个exe是什么语言写的<p><img alt=preview src=v2-e4eb45bebf4c127120c24ce2bf47cbec_r.jpg><p>好的，是c#，所有c#程序都支持使用.config配置项来配置代理，将如下内容保存为 <strong>Update.exe.config</strong> 存放在Update.exe的同目录下，来给其设置代理。<pre style=background-color:#2b303b;color:#c0c5ce;><code><span>&LT?xml version="1.0" encoding="utf-8"?></span><span>
</span><span>&LTconfiguration></span><span>
</span><span>  &LTconfigSections></span><span>
</span><span>  &LT/configSections></span><span>
</span><span>  &LTsystem.net></span><span>
</span><span>    &LT!--Configure fiddler local proxy--></span><span>
</span><span>    &LTdefaultProxy></span><span>
</span><span>      &LTproxy autoDetect="false" bypassonlocal="false" proxyaddress="http://127.0.0.1:1080" usesystemdefault="false" /></span><span>
</span><span>    &LT/defaultProxy></span><span>
</span><span>  &LT/system.net></span><span>
</span><span>&LT/configuration></span><span>
</span></code></pre><p>注：127.0.0.1:1080 是小飞机默认的本地代理地址，如使用其他代理工具，请根据实际情况填写。<h2 id=2-she-zhi-discord-exede-dai-li>2. 设置Discord.exe的代理</h2><p>Discord是electron框架编写的，理论支持chrome的命令行参数，所以直接改快捷方式命令行即可，反编译看了一下Update.exe的源码，发现了Discord.exe增加启动参数的方法。<p><img alt=img src=v2-c0ffed0763335677490b6a1eaf82fb57_720w.jpg><p>所以我们使用a=参数增加代理，复制下面的内容添加到“目标”的尾部。<pre style=background-color:#2b303b;color:#c0c5ce;><code><span> --a=--proxy-server=http://127.0.0.1:1080</span><span>
</span></code></pre><p><img alt=img src=v2-7d45ffef5cb3359a79fb1d49878a11d6_720w.jpg><p>以上两项修改完，你可以运行快捷方式无需全局代理启动Discord了。<p><strong>V2RayN默认没开http代理，你要打开http代理才行。 另外HTTP代理端口号是SOCKS5代理端口号+1，也就是说如果默认是10808，那么HTTP代理打开后，端口号是10809</strong></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2022 modao</span><span class=copyright-theme> <span class=copyright-theme-sep>:: </span> Theme: <a href=https://github.com/pawroman/zola-theme-terminimal/>Terminimal</a> by pawroman </span></div></div></footer></div>