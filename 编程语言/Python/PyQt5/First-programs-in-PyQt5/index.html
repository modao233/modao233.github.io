<!DOCTYPE html>
<html>
<!-- html页面布局的head -->

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<title>
		modao
	</title>

	<!-- 百度统计代码 -->
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?902dc461fe0d25f09e74e0d04677b6d8";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-N2WTGJE0M5"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-N2WTGJE0M5');
	</script>
<meta name="generator" content="Hexo 5.4.0"></head>

  <body>

    <!-- 文章详情页模板 -->

<!-- 主页标题栏 -->

<link rel="stylesheet" href="/css/navigatebar.css">


<header class="header">
	<div class="topbar">
		<div class="topbar-button topbar-mine">
			<a href="/">
				modao
			</a>
		</div>
		
			<div class="topbar-button">
				<a href="/">
					Home
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/categories">
					Categories
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/links">
					Friends
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/sites">
					Sites
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/stars">
					Stars
				</a>
			</div>
		

	</div>
	<div class="slogan">
		「生活可以更简单, 欢迎来到我的开源世界」
	</div>
</header>


<link rel="stylesheet" href="/css/font.css">


<link rel="stylesheet" href="/css/post.css" media="screen and (min-width: 600px)">


<link rel="stylesheet" href="/css/post_mobile.css" media="screen and (max-width: 600px)">


<link rel="stylesheet" href="/css/highlight.css">




<div class="toc">
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="toc-text">PyQt5 简单示例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%9B%BE%E6%A0%87"><span class="toc-text">应用程序图标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8-PyQt5-%E4%B8%AD%E6%98%BE%E7%A4%BA%E5%B7%A5%E5%85%B7%E6%8F%90%E7%A4%BA"><span class="toc-text">在 PyQt5 中显示工具提示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E7%AA%97%E5%8F%A3"><span class="toc-text">关闭窗口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E6%B6%88%E6%81%AF%E6%A1%86"><span class="toc-text">PyQt5 消息框</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%8F%E5%B9%95%E4%B8%8A%E7%9A%84%E5%B1%85%E4%B8%AD%E7%AA%97%E5%8F%A3"><span class="toc-text">屏幕上的居中窗口</span></a></li></ol>
</div>

<div class="content-area">
	<div class="title">
		PyQt5 中的第一个程序
	</div>
	
	<div class="page-date">
		2020-08-18
	</div>
	
	<div class="category-area">
		
			 
				「
				<div class="category">
					<a href="/categories/python">python</a>
				
				</div>
				」
			 
				「
				<div class="category">
					<a href="/categories/PyQt5">PyQt5</a>
				
				</div>
				」
			
		
	</div>
	
	<div class="content">
		<p><a target="_blank" rel="noopener" href="http://zetcode.com/gui/pyqt5/firstprograms/">翻译自原文：First programs in PyQt5</a></p>
<p>翻译时间 2020 年 8 月 18 日</p>
<span id="more"></span>

<p>在 PyQt5 教程的这一部分中，我们学习一些基本功能。这些示例显示工具提示和图标、关闭窗口、显示消息框并在桌面上居中显示窗口。</p>
<h2 id="PyQt5-简单示例"><a href="#PyQt5-简单示例" class="headerlink" title="PyQt5 简单示例"></a>PyQt5 简单示例</h2><p>这是一个显示小窗口的简单示例，然而，我们可以用这个窗口做很多事，我们可以调整大小，最大化它或最小化它，这需要大量的编码，有人已经编码了此功能。由于在大多数应用程序中重复，因此无需再次编写代码。PyQt5 是一个高级工具包。如果我们在较低级别的工具包中编写代码，下面的代码示例可以很容易地包含数百行。</p>
<p>simple.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QApplication, QWidget<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br><br>    app = QApplication(sys.argv)<br><br>    w = QWidget()<br>    w.resize(<span class="hljs-number">250</span>, <span class="hljs-number">150</span>)<br>    w.move(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>)<br>    w.setWindowTitle(<span class="hljs-string">&#x27;Simple&#x27;</span>)<br>    w.show()<br><br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>上面的代码示例显示屏幕上的一个小窗口。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">import sys<br>from PyQt5.QtWidgets import QApplication, QWidget<br></code></pre></td></tr></table></figure>

<p>在这里，我们提供必要的进口。基本小部件位于<code>PyQt5.QtWidgets</code>模块中。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">app = QApplication(sys.argv)<br></code></pre></td></tr></table></figure>

<p><strong>每个 PyQt5 应用程序都必须创建一个应用程序对象</strong>。<code>sys.argv</code>参数是命令行中的参数列表。Python 脚本可以从 shell 运行。这是一种控制脚本启动的方法。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">w = QWidget()<br></code></pre></td></tr></table></figure>

<p><code>QWidget</code>部件是 PyQt5 中所有用户界面对象的基类。我们提供 <code>QWidget</code>的默认构造函数。默认构造函数没有父级。没有父级的小部件称为窗口。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">w.resize(250, 150)<br></code></pre></td></tr></table></figure>

<p><code>resize()</code>方法调整小部件的大小。它是250px宽和150px高。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">w.move(300, 300)<br></code></pre></td></tr></table></figure>

<p><code>move()</code>方法将小部件移动到屏幕上的 x=300、y=300 坐标位置。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">w.setWindowTitle(&#x27;Simple&#x27;)<br></code></pre></td></tr></table></figure>

<p>我们用<code>setWindowTitle()</code>设置窗口的标题。标题显示在标题栏中。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">w.show()<br></code></pre></td></tr></table></figure>

<p><code>show()</code>方法在屏幕上显示小部件。小部件首先在内存中创建，随后在屏幕上显示。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">sys.exit(app.exec_())<br></code></pre></td></tr></table></figure>

<p>最后，我们输入应用程序的主循环（mainloop）。事件处理从这一点开始。主循环从窗口系统接收事件，并将它们发送到应用程序部件。如果我们调用<code>exit()</code>方法或主部件被销毁，则主循环结束。<code>sys.exit()</code>方法可确保干净退出。环境将通知如何结束应用程序。</p>
<p><code>exec_()</code>方法具有下划线，这是因为<code>exec</code>是 Python 关键字，因此使用<code>exec_()</code>。</p>
<p><img src="image-20200818204212869.png" alt="image-20200818204212869"></p>
<center>图:Simple</center>

<h2 id="应用程序图标"><a href="#应用程序图标" class="headerlink" title="应用程序图标"></a>应用程序图标</h2><p>应用程序图标是一个小图像，通常显示在标题栏的左上角。在下面的示例中，我们将演示如何在 PyQt5 中做到这一点。我们还将介绍一些新的方法。</p>
<p>某些环境不在标题栏中显示图标。我们需要启用它们。如果<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/44080247/pyqt5-does-now-show-icons/45439678#45439678">看不到</a>任何图标，请参阅原文作者在 Stackoverflow 上的答案，了解解决方案。</p>
<p>icon.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QApplication, QWidget<br><span class="hljs-keyword">from</span> PyQt5.QtGui <span class="hljs-keyword">import</span> QIcon<br><span class="hljs-keyword">from</span> PyQt5.QtCore <span class="hljs-keyword">import</span> QFileInfo<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QWidget</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br>        <br>        self.initUI()<br><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br><br>        self.setGeometry(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">220</span>)<br>        self.setWindowTitle(<span class="hljs-string">&#x27;Icon&#x27;</span>)<br>        <span class="hljs-comment"># 设置图标路径：root为程序文件所在绝对路径（win10+vscode使用相对路径不显示）</span><br>        root = QFileInfo(__file__).absolutePath()<br>        self.setWindowIcon(QIcon(root + <span class="hljs-string">&#x27;/web.png&#x27;</span>))<br><br>        self.show()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>前面的示例以过程样式进行编码。Python 编程语言支持过程和面向对象的编程样式。PyQt5 中的编程意味着在 OOP 中编程。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br>        ...<br></code></pre></td></tr></table></figure>

<p>面向对象的编程中的三个重要方面是类、数据和方法。在这里，我们创建一个名为<code>Example</code>的新类，<code>Example</code>类从<code>QWidget</code>类继承。这意味着我们调用两个构造函数：第一个用于<code>Example</code>类，第二个用于被继承类<code>QWidget</code>。<code>super()</code>方法返回<code>Example</code>类的父对象，我们调用其构造函数。<code>__init__()</code>方法是Python语言中的构造函数方法。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">self.initUI()<br></code></pre></td></tr></table></figure>

<p>GUI 的创建委派给<code>initUI()</code>方法。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">self.setGeometry(300, 300, 300, 220)<br>self.setWindowTitle(&#x27;Icon&#x27;)<br>self.setWindowIcon(QIcon(&#x27;web.png&#x27;))<br></code></pre></td></tr></table></figure>

<p>这三种方法都是从<code>QWidget</code>类继承的：</p>
<ul>
<li><code>setGeometry()</code>做两件事：它定位屏幕上的窗口并设置其大小。<ul>
<li>  前两个参数是窗口的 x 和 y 位置</li>
<li>  第三个是宽度</li>
<li>  第四个是窗口的高度</li>
<li>  事实上，它结合了<code>resize()</code>和<code>move()</code>方法</li>
</ul>
</li>
<li>  <code>setWindowTitle()</code>设置窗口标题</li>
<li>  <code>setWindowIcon()</code>方法设置应用程序图标。为此，我们创建了一个<code>QIcon</code>对象，接收要显示的图标的路径。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">def main():<br><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br></code></pre></td></tr></table></figure>

<p>创建应用程序和示例对象。主循环已启动。</p>
<p><img src="image-20200818210910239.png" alt="image-20200818210910239"></p>
<center>图：图标显示</center>

<h2 id="在-PyQt5-中显示工具提示"><a href="#在-PyQt5-中显示工具提示" class="headerlink" title="在 PyQt5 中显示工具提示"></a>在 PyQt5 中显示工具提示</h2><p>我们可以为我们的任何部件提供”显示帮助“。</p>
<p>tooltip.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> (QWidget, QToolTip,<br>    QPushButton, QApplication)<br><span class="hljs-keyword">from</span> PyQt5.QtGui <span class="hljs-keyword">import</span> QFont<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QWidget</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        self.initUI()<br><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br><br>        QToolTip.setFont(QFont(<span class="hljs-string">&#x27;SansSerif&#x27;</span>, <span class="hljs-number">10</span>))<br><br>        self.setToolTip(<span class="hljs-string">&#x27;This is a &lt;b&gt;QWidget&lt;/b&gt; widget&#x27;</span>)<br><br>        btn = QPushButton(<span class="hljs-string">&#x27;Button&#x27;</span>, self)<br>        btn.setToolTip(<span class="hljs-string">&#x27;This is a &lt;b&gt;QPushButton&lt;/b&gt; widget&#x27;</span>)<br>        btn.resize(btn.sizeHint())<br>        btn.move(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>)<br><br>        self.setGeometry(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">200</span>)<br>        self.setWindowTitle(<span class="hljs-string">&#x27;Tooltips&#x27;</span>)<br>        self.show()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在此示例中，我们显示两个 PyQt5 小部件的工具提示。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">QToolTip.setFont(QFont(&#x27;SansSerif&#x27;, 10))<br></code></pre></td></tr></table></figure>

<p>此静态方法设置用于呈现工具提示的字体。我们使用 10pt 的 SansSerif 字体。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">self.setToolTip(&#x27;This is a &lt;b&gt;QWidget&lt;/b&gt; widget&#x27;)<br></code></pre></td></tr></table></figure>

<p>若要创建工具提示，我们调用<code>setTooltip()</code>方法。我们可以使用富文本格式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">btn = QPushButton(&#x27;Button&#x27;, self)<br>btn.setToolTip(&#x27;This is a &lt;b&gt;QPushButton&lt;/b&gt; widget&#x27;)<br></code></pre></td></tr></table></figure>

<p>我们创建一个按钮小部件，并为此设置一个工具提示。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">btn.resize(btn.sizeHint())<br>btn.move(50, 50)<br></code></pre></td></tr></table></figure>

<p>调整按钮的大小和在窗口上的位置。<code>sizeHint()</code>方法为按钮提供了建议的大小。</p>
<p><img src="image-20200818211718893.png" alt="image-20200818211718893"></p>
<center>图：工具提示</center>

<h2 id="关闭窗口"><a href="#关闭窗口" class="headerlink" title="关闭窗口"></a>关闭窗口</h2><p>关闭窗口的显示方式是单击标题栏上的✖标记。在下面的示例中，我们将演示如何以编程方式关闭窗口。我们将简要触摸信号和插槽。</p>
<p>以下是我们在示例中使用的<code>QPushButton</code>部件的构造函数。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">QPushButton(string text, QWidget parent = None)<br></code></pre></td></tr></table></figure>

<p><code>text</code>参数是将显示在按钮上的文本。<code>parent</code>是一个部件用来放置我们的按钮，在我们的案例中，这将是一个<code>QWidget</code>。应用程序中的部件呈现层次结构，在此层次结构中，大多数部件都有其父母，没有父母的部件是顶级窗口。</p>
<p>quit_button.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QWidget, QPushButton, QApplication<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QWidget</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        self.initUI()<br><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br><br>        qbtn = QPushButton(<span class="hljs-string">&#x27;Quit&#x27;</span>, self)<br>        qbtn.clicked.connect(QApplication.instance().quit)<br>        qbtn.resize(qbtn.sizeHint())<br>        qbtn.move(<span class="hljs-number">50</span>, <span class="hljs-number">50</span>)<br><br>        self.setGeometry(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">350</span>, <span class="hljs-number">250</span>)<br>        self.setWindowTitle(<span class="hljs-string">&#x27;Quit button&#x27;</span>)<br>        self.show()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在此示例中，我们创建一个退出按钮。单击该按钮后，应用程序将终止。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qbtn = QPushButton(&#x27;Quit&#x27;, self)<br></code></pre></td></tr></table></figure>

<p>我们创建一个按钮，该按钮是<code>QPushButton</code>类的实例。构造函数的第一个参数是按钮的标签。第二个参数是父部件，父部件是<code>Example</code>，它继承自<code>QWidget</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qbtn.clicked.connect(QApplication.instance().quit)<br></code></pre></td></tr></table></figure>

<p>PyQt5 中的事件处理系统由信号和插槽机制构建。如果我们单击该按钮，<code>clicked</code>信号将发出。插槽可以是 Qt 插槽或任何 Python 可调用。</p>
<p>使用<code>QApplication.instance()</code>检索到的**<code>QCoreApplication</code>**包含主事件循环，它处理并调度所有事件。单击的信号连接到终止应用程序的<code>quit()</code>方法。通信在两个对象之间完成：发送方和接收方，发送方是按钮，接收方是应用程序对象。</p>
<p><img src="image-20200818213015794.png" alt="image-20200818213015794"></p>
<center>图：退出按钮</center>

<h2 id="PyQt5-消息框"><a href="#PyQt5-消息框" class="headerlink" title="PyQt5 消息框"></a>PyQt5 消息框</h2><p>默认情况下，如果我们单击标题栏上的 ✖ 按钮，则<code>QWidget</code>关闭，有时我们想要修改此默认行为。例如，如果我们在编辑器中打开了一个文件，我们为此进行了一些更改。我们显示一个消息框来确认操作。</p>
<p>messagebox.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QWidget, QMessageBox, QApplication<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QWidget</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        self.initUI()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br><br>        self.setGeometry(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">250</span>, <span class="hljs-number">150</span>)<br>        self.setWindowTitle(<span class="hljs-string">&#x27;Message box&#x27;</span>)<br>        self.show()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">closeEvent</span>(<span class="hljs-params">self, event</span>):</span><br><br>        reply = QMessageBox.question(self, <span class="hljs-string">&#x27;Message&#x27;</span>,<br>                                     <span class="hljs-string">&quot;Are you sure to quit?&quot;</span>, QMessageBox.Yes |<br>                                     QMessageBox.No, QMessageBox.No)<br><br>        <span class="hljs-keyword">if</span> reply == QMessageBox.Yes:<br>            event.accept()<br>        <span class="hljs-keyword">else</span>:<br>            event.ignore()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>如果我们关闭<code>QWidget</code>，<code>QCloseEvent</code>将生成 。要修改部件行为，我们需要重新实现事件处理程序<code>closeEvent()</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">reply = QMessageBox.question(self, &#x27;Message&#x27;,<br>                             &quot;Are you sure to quit?&quot;, QMessageBox.Yes |<br>                             QMessageBox.No, QMessageBox.No)<br></code></pre></td></tr></table></figure>

<p>我们显示一个包含两个按钮的消息框：Yes和No。第一个字符串将显示在标题栏上，第二个字符串是对话框显示的消息文本，第三个参数指定对话框中显示的按钮的组合，最后一个参数是默认按钮，它是最初具有键盘焦点的按钮。返回值存储在<code>reply</code>变量中。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">if reply == QtGui.QMessageBox.Yes:<br>    event.accept()<br>else:<br>    event.ignore()<br></code></pre></td></tr></table></figure>

<p>在这里，我们测试返回值。如果我们单击”是”按钮，我们接受导致关闭小部件和终止应用程序的事件。否则，我们忽略关闭事件。</p>
<p><img src="image-20200818225254940.png" alt="image-20200818225254940"></p>
<center>图：消息框</center>

<h2 id="屏幕上的居中窗口"><a href="#屏幕上的居中窗口" class="headerlink" title="屏幕上的居中窗口"></a>屏幕上的居中窗口</h2><p>以下脚本演示了如何在桌面屏幕上居中设置窗口的中心。</p>
<p>center.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br><br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> PyQt5.QtWidgets <span class="hljs-keyword">import</span> QWidget, QDesktopWidget, QApplication<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span>(<span class="hljs-params">QWidget</span>):</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        self.initUI()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initUI</span>(<span class="hljs-params">self</span>):</span><br><br>        self.resize(<span class="hljs-number">250</span>, <span class="hljs-number">150</span>)<br>        self.center()<br><br>        self.setWindowTitle(<span class="hljs-string">&#x27;Center&#x27;</span>)<br>        self.show()<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">center</span>(<span class="hljs-params">self</span>):</span><br><br>        qr = self.frameGeometry()<br>        cp = QDesktopWidget().availableGeometry().center()<br>        qr.moveCenter(cp)<br>        self.move(qr.topLeft())<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p><code>QDesktopWidget</code>类提供有关用户桌面的信息，包括屏幕大小。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">self.center()<br></code></pre></td></tr></table></figure>

<p>将窗口居中的代码放置在自定义方法<code>center()</code>中。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qr = self.frameGeometry()<br></code></pre></td></tr></table></figure>

<p>我们得到一个矩形，指定主窗口的几何体。这包括任何窗口框架。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">cp = QDesktopWidget().availableGeometry().center()<br></code></pre></td></tr></table></figure>

<p>我们计算出显示器的屏幕分辨率。从这个分辨率，我们得到中心点。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qr.moveCenter(cp)<br></code></pre></td></tr></table></figure>

<p>我们的矩形已经有它的宽度和高度，现在我们将矩形的中心设置为屏幕的中心，矩形的大小保持不变。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">self.move(qr.topLeft())<br></code></pre></td></tr></table></figure>

<p>我们将应用程序窗口的左上角移动到 qr 矩形的左上角，从而将窗口居中在屏幕上。</p>
<blockquote>
<p>  先取窗口矩形（模型），将矩形居中，再将程序窗口放到矩形中</p>
</blockquote>
<p>在 PyQt5 教程的这一部分中，我们在 PyQt5 中创建了简单的代码示例。</p>

	</div>
</div>
<!-- 返回顶部模块 -->
<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;font-size:26px;background-color:#8590a6">
	<a title="返回顶部" style="color:#04fa9f"><⇧></a>
</div>
<script src="/js/totop.js"></script>

  </body>

</html>