<!DOCTYPE html>
<html>
<!-- html页面布局的head -->

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<title>
		modao
	</title>

	<!-- 百度统计代码 -->
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?902dc461fe0d25f09e74e0d04677b6d8";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-N2WTGJE0M5"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-N2WTGJE0M5');
	</script>
<meta name="generator" content="Hexo 5.4.0"></head>

  <body>

    <!-- 文章详情页模板 -->

<!-- 主页标题栏 -->

<link rel="stylesheet" href="/css/navigatebar.css">


<header class="header">
	<div class="topbar">
		<div class="topbar-button topbar-mine">
			<a href="/">
				modao
			</a>
		</div>
		
			<div class="topbar-button">
				<a href="/">
					Home
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/categories">
					Categories
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/links">
					Friends
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/sites">
					Sites
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/stars">
					Stars
				</a>
			</div>
		

	</div>
	<div class="slogan">
		「生活可以更简单, 欢迎来到我的开源世界」
	</div>
</header>


<link rel="stylesheet" href="/css/font.css">


<link rel="stylesheet" href="/css/post.css" media="screen and (min-width: 600px)">


<link rel="stylesheet" href="/css/post_mobile.css" media="screen and (max-width: 600px)">


<link rel="stylesheet" href="/css/highlight.css">




<div class="toc">
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#QPainter"><span class="toc-text">QPainter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-paintEvent-method"><span class="toc-text">The paintEvent method</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E7%BB%98%E5%88%B6%E6%96%87%E6%9C%AC"><span class="toc-text">PyQt5 绘制文本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E7%BB%98%E5%88%B6%E7%82%B9"><span class="toc-text">PyQt5 绘制点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-%E9%A2%9C%E8%89%B2"><span class="toc-text">PyQt5 颜色</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-QPen"><span class="toc-text">PyQt5 QPen</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PyQt5-QBrush"><span class="toc-text">PyQt5 QBrush</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF"><span class="toc-text">贝塞尔曲线</span></a></li></ol>
</div>

<div class="content-area">
	<div class="title">
		PyQt5 中的绘画板
	</div>
	
	<div class="page-date">
		2020-08-20
	</div>
	
	<div class="category-area">
		
			 
				「
				<div class="category">
					<a href="/categories/python">python</a>
				
				</div>
				」
			 
				「
				<div class="category">
					<a href="/categories/PyQt5">PyQt5</a>
				
				</div>
				」
			
		
	</div>
	
	<div class="content">
		<p><a target="_blank" rel="noopener" href="http://zetcode.com/gui/pyqt5/painting/">翻译自原文：Painting in PyQt5</a></p>
<p>翻译时间 2020 年 8 月 20 日</p>
<span id="more"></span>

<p>PyQt5 绘画系统能够渲染矢量图形、图像和基于字体的提纲文本。当我们想要更改或增强现有部件，或者我们从头开始创建自定义部件时，可能需要绘制。要进行绘图，我们使用 PyQt5 工具包提供的绘画 API。</p>
<h2 id="QPainter"><a href="#QPainter" class="headerlink" title="QPainter"></a>QPainter</h2><p><code>QPainter</code>在部件和其他绘画设备上执行low-level绘画。它可以绘制从简单线条到复杂形状的所有内容。</p>
<h2 id="The-paintEvent-method"><a href="#The-paintEvent-method" class="headerlink" title="The paintEvent method"></a>The paintEvent method</h2><p>绘画在<code>paintEvent</code>方法内完成。绘制代码放置在<code>QPainter</code>对象的<code>begin</code>和<code>end</code>方法之间。它在小部件和其他油漆设备上执行低级绘画。</p>
<h2 id="PyQt5-绘制文本"><a href="#PyQt5-绘制文本" class="headerlink" title="PyQt5 绘制文本"></a>PyQt5 绘制文本</h2><p>我们首先在窗口的工作区上绘制一些 Unicode 文本。</p>
<p>draw_text.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">import sys<br>from PyQt5.QtWidgets import QWidget, QApplication<br>from PyQt5.QtGui import QPainter, QColor, QFont<br>from PyQt5.QtCore import Qt<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br><br>        self.text = &quot;Hello World\nHello World&quot;<br><br>        self.setGeometry(300, 300, 350, 300)<br>        self.setWindowTitle(&#x27;Drawing text&#x27;)<br>        self.show()<br><br>    def paintEvent(self, event):<br>        qp = QPainter()<br>        qp.begin(self)<br>        self.drawText(event, qp)<br>        qp.end()<br><br>    def drawText(self, event, qp):<br>        qp.setPen(QColor(168, 34, 3))<br>        qp.setFont(QFont(&#x27;Monaco&#x27;, 10))<br>        qp.drawText(event.rect(), Qt.AlignCenter, self.text)<br><br><br>def main():<br><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在我们的示例中，我们绘制一些文本。文本垂直和水平对齐。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">def paintEvent(self, event):<br>...<br></code></pre></td></tr></table></figure>

<p>绘制在绘制事件中完成。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qp = QPainter()<br>qp.begin(self)<br>self.drawText(event, qp)<br>qp.end()<br></code></pre></td></tr></table></figure>

<p>这个<code>QPainter</code>负责所有的低级绘画。所有的绘画方法都介于<code>begin</code>和<code>end</code>方法之间。实际绘制委派给<code>drawText</code>方法。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qp.setPen(QColor(168, 34, 3))<br>qp.setFont(QFont(&#x27;Monaco&#x27;, 10))<br></code></pre></td></tr></table></figure>

<p>在这里，我们定义一个笔和一个字体，用于绘制文本。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qp.drawText(event.rect(), Qt.AlignCenter, self.text)<br></code></pre></td></tr></table></figure>

<p><code>drawText</code>方法在窗口上绘制文本。绘制事件的<code>rect</code>方法返回需要更新的矩形。使用 <code>Qt.AlignCenter</code>，我们在两个维度中对齐文本。</p>
<p><img src="image-20200820175256627.png" alt="image-20200820175256627"></p>
<center>图：绘图文本</center>

<h2 id="PyQt5-绘制点"><a href="#PyQt5-绘制点" class="headerlink" title="PyQt5 绘制点"></a>PyQt5 绘制点</h2><p>点是可以绘制的最简单的图形对象。它是应用窗口上的一个小点。</p>
<p>draw_points.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">from PyQt5.QtWidgets import QWidget, QApplication<br>from PyQt5.QtGui import QPainter<br>from PyQt5.QtCore import Qt<br>import sys, random<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        self.setGeometry(300, 300, 300, 190)<br>        self.setWindowTitle(&#x27;Points&#x27;)<br>        self.show()<br><br>    def paintEvent(self, e):<br>        qp = QPainter()<br>        qp.begin(self)<br>        self.drawPoints(qp)<br>        qp.end()<br><br>    def drawPoints(self, qp):<br>        qp.setPen(Qt.red)<br>        size = self.size()<br><br>        if size.height() &lt;= 1 or size.height() &lt;= 1:<br>            return<br><br>        for i in range(1000):<br>            x = random.randint(1, size.width() - 1)<br>            y = random.randint(1, size.height() - 1)<br>            qp.drawPoint(x, y)<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在我们的示例中，我们在窗口的工作区上随机绘制 1000 个红点。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qp.setPen(Qt.red)<br></code></pre></td></tr></table></figure>

<p>我们把钢笔设置为红色。我们使用预定义的颜色常数<code>Qt.red</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">size = self.size()<br></code></pre></td></tr></table></figure>

<p>每次调整窗口大小时，将生成一个绘制事件。我们使用<code>size()</code>方法获取窗口的当前大小。我们使用窗口的大小将点分布到窗口的工作区。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qp.drawPoint(x, y) <br></code></pre></td></tr></table></figure>

<p>通过 <code>drawPoint()</code>方法画点。</p>
<p><img src="image-20200820175628711.png" alt="image-20200820175628711"></p>
<center>图：点</center>

<h2 id="PyQt5-颜色"><a href="#PyQt5-颜色" class="headerlink" title="PyQt5 颜色"></a>PyQt5 颜色</h2><p>颜色是表示红色、绿色和蓝色 （RGB） 强度值组合的对象。有效 RGB 值在 0 到 255 之间。我们可以用各种方式定义颜色。最常见的是 RGB 十进制值或十六进制值。我们还可以使用代表红色、绿色、蓝色和 Alpha 的 RGBA 值。在这里，我们添加一些有关透明度的额外信息。Alpha 值 255 定义完全不透明度，0 表示完全透明，例如颜色不可见。</p>
<p>colours.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">from PyQt5.QtWidgets import QWidget, QApplication<br>from PyQt5.QtGui import QPainter, QColor, QBrush<br>import sys<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        self.setGeometry(300, 300, 350, 100)<br>        self.setWindowTitle(&#x27;Colours&#x27;)<br>        self.show()<br><br>    def paintEvent(self, e):<br>        qp = QPainter()<br>        qp.begin(self)<br>        self.drawRectangles(qp)<br>        qp.end()<br><br>    def drawRectangles(self, qp):<br>        col = QColor(0, 0, 0)<br>        col.setNamedColor(&#x27;#d4d4d4&#x27;)<br>        qp.setPen(col)<br><br>        qp.setBrush(QColor(200, 0, 0))<br>        qp.drawRect(10, 15, 90, 60)<br><br>        qp.setBrush(QColor(255, 80, 0, 160))<br>        qp.drawRect(130, 15, 90, 60)<br><br>        qp.setBrush(QColor(25, 0, 90, 200))<br>        qp.drawRect(250, 15, 90, 60)<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在我们的示例中，我们绘制三个彩色矩形。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">color = QColor(0, 0, 0)<br>color.setNamedColor(&#x27;#d4d4d4&#x27;)<br></code></pre></td></tr></table></figure>

<p>在这里，我们使用十六进制表示法定义颜色。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qp.setBrush(QColor(200, 0, 0))<br>qp.drawRect(10, 15, 90, 60)<br></code></pre></td></tr></table></figure>

<p>在这里，我们定义一个画笔并绘制一个矩形。笔刷是一个基本的图形对象，用于绘制形状的背景。<code>drawRect()</code>方法接受四个参数。前两个值是轴上的 x 和 y 值。第三个和第四个参数是矩形的宽度和高度。该方法使用当前笔和笔刷绘制矩形。</p>
<p><img src="image-20200820180516295.png" alt="image-20200820180516295"></p>
<center>图：颜色</center> 

<h2 id="PyQt5-QPen"><a href="#PyQt5-QPen" class="headerlink" title="PyQt5 QPen"></a>PyQt5 QPen</h2><p><code>QPen</code>是基本图形对象。它用于绘制矩形、椭圆、多边形或其他形状的线条、曲线和轮廓。</p>
<p>pens.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">from PyQt5.QtWidgets import QWidget, QApplication<br>from PyQt5.QtGui import QPainter, QPen<br>from PyQt5.QtCore import Qt<br>import sys<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        self.setGeometry(300, 300, 280, 270)<br>        self.setWindowTitle(&#x27;Pen styles&#x27;)<br>        self.show()<br><br>    def paintEvent(self, e):<br>        qp = QPainter()<br>        qp.begin(self)<br>        self.drawLines(qp)<br>        qp.end()<br><br>    def drawLines(self, qp):<br>        pen = QPen(Qt.black, 2, Qt.SolidLine)<br><br>        qp.setPen(pen)<br>        qp.drawLine(20, 40, 250, 40)<br><br>        pen.setStyle(Qt.DashLine)<br>        qp.setPen(pen)<br>        qp.drawLine(20, 80, 250, 80)<br><br>        pen.setStyle(Qt.DashDotLine)<br>        qp.setPen(pen)<br>        qp.drawLine(20, 120, 250, 120)<br><br>        pen.setStyle(Qt.DotLine)<br>        qp.setPen(pen)<br>        qp.drawLine(20, 160, 250, 160)<br><br>        pen.setStyle(Qt.DashDotDotLine)<br>        qp.setPen(pen)<br>        qp.drawLine(20, 200, 250, 200)<br><br>        pen.setStyle(Qt.CustomDashLine)<br>        pen.setDashPattern([1, 4, 5, 4])<br>        qp.setPen(pen)<br>        qp.drawLine(20, 240, 250, 240)<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在我们的示例中，我们绘制了六条线。线条以六种不同的钢笔样式绘制。有五种预定义的笔样式。我们还可以创建自定义笔样式。最后一行使用自定义笔样式绘制。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">pen = QPen(Qt.black, 2, Qt.SolidLine)<br></code></pre></td></tr></table></figure>

<p>我们创建一个<code>QPen</code>对象。颜色是黑色的。宽度设置为 2 像素，以便我们可以看到笔样式之间的差异。 <code>Qt.SolidLine</code>是预定义的笔样式之一。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">pen.setStyle(Qt.CustomDashLine)<br>pen.setDashPattern([1, 4, 5, 4])<br>qp.setPen(pen)<br></code></pre></td></tr></table></figure>

<p>在这里，我们定义自定义笔样式。我们设置了<code>Qt.CustomDashLine</code>笔样式并调用<code>setDashPattern</code>方法。数字列表定义样式。一定有一个均匀的数字数。奇数定义破折号，偶数空白。数字多，空间或破折号也更大。我们的模式是 1 px 破折号， 4 px 空白， 5 px 破折号， 4 px 空白等.</p>
<p><img src="image-20200820211021199.png" alt="image-20200820211021199"></p>
<center>图：钢笔样式</center>



<h2 id="PyQt5-QBrush"><a href="#PyQt5-QBrush" class="headerlink" title="PyQt5 QBrush"></a>PyQt5 QBrush</h2><p>``QBrush`是一个基本的图形对象。它用于绘制图形形状的背景，如矩形、椭圆或多边形。画笔可以有三种不同类型的：预定义画笔、渐变或纹理图案。</p>
<p>brushes.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">from PyQt5.QtWidgets import QWidget, QApplication<br>from PyQt5.QtGui import QPainter, QBrush<br>from PyQt5.QtCore import Qt<br>import sys<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        self.setGeometry(300, 300, 355, 280)<br>        self.setWindowTitle(&#x27;Brushes&#x27;)<br>        self.show()<br><br>    def paintEvent(self, e):<br>        qp = QPainter()<br>        qp.begin(self)<br>        self.drawBrushes(qp)<br>        qp.end()<br><br>    def drawBrushes(self, qp):<br>        brush = QBrush(Qt.SolidPattern)<br>        qp.setBrush(brush)<br>        qp.drawRect(10, 15, 90, 60)<br><br>        brush.setStyle(Qt.Dense1Pattern)<br>        qp.setBrush(brush)<br>        qp.drawRect(130, 15, 90, 60)<br><br>        brush.setStyle(Qt.Dense2Pattern)<br>        qp.setBrush(brush)<br>        qp.drawRect(250, 15, 90, 60)<br><br>        brush.setStyle(Qt.DiagCrossPattern)<br>        qp.setBrush(brush)<br>        qp.drawRect(10, 105, 90, 60)<br><br>        brush.setStyle(Qt.Dense5Pattern)<br>        qp.setBrush(brush)<br>        qp.drawRect(130, 105, 90, 60)<br><br>        brush.setStyle(Qt.Dense6Pattern)<br>        qp.setBrush(brush)<br>        qp.drawRect(250, 105, 90, 60)<br><br>        brush.setStyle(Qt.HorPattern)<br>        qp.setBrush(brush)<br>        qp.drawRect(10, 195, 90, 60)<br><br>        brush.setStyle(Qt.VerPattern)<br>        qp.setBrush(brush)<br>        qp.drawRect(130, 195, 90, 60)<br><br>        brush.setStyle(Qt.BDiagPattern)<br>        qp.setBrush(brush)<br>        qp.drawRect(250, 195, 90, 60)<br><br><br>def main():<br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>在我们的示例中，我们绘制了九个不同的矩形。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">brush = QBrush(Qt.SolidPattern)<br>qp.setBrush(brush)<br>qp.drawRect(10, 15, 90, 60)<br></code></pre></td></tr></table></figure>

<p>我们定义画笔对象。我们把它设置为绘制器对象，然后通过调用<code>drawRect</code>方法绘制矩形。</p>
<p><img src="image-20200820211145652.png" alt="image-20200820211145652"></p>
<center>图：画笔</center>

<h2 id="贝塞尔曲线"><a href="#贝塞尔曲线" class="headerlink" title="贝塞尔曲线"></a>贝塞尔曲线</h2><p>贝塞尔曲线是立方线。PyQt5 中的贝塞尔曲线可以使用<code>QPainterPath</code>创建。绘制器路径是由许多图形构建基块（如矩形、椭圆、线条和曲线）组成的对象。</p>
<p>bezier_curve.py</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">import sys<br><br>from PyQt5.QtGui import QPainter, QPainterPath<br>from PyQt5.QtWidgets import QWidget, QApplication<br><br><br>class Example(QWidget):<br><br>    def __init__(self):<br>        super().__init__()<br><br>        self.initUI()<br><br>    def initUI(self):<br>        self.setGeometry(300, 300, 380, 250)<br>        self.setWindowTitle(&#x27;Bézier curve&#x27;)<br>        self.show()<br><br>    def paintEvent(self, e):<br>        qp = QPainter()<br>        qp.begin(self)<br>        qp.setRenderHint(QPainter.Antialiasing)<br>        self.drawBezierCurve(qp)<br>        qp.end()<br><br>    def drawBezierCurve(self, qp):<br>        path = QPainterPath()<br>        path.moveTo(30, 30)<br>        path.cubicTo(30, 30, 200, 350, 350, 30)<br><br>        qp.drawPath(path)<br><br><br>def main():<br><br>    app = QApplication(sys.argv)<br>    ex = Example()<br>    sys.exit(app.exec_())<br><br><br>if __name__ == &#x27;__main__&#x27;:<br>    main()<br></code></pre></td></tr></table></figure>

<p>本示例绘制贝塞尔曲线。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">path = QPainterPath()<br>path.moveTo(30, 30)<br>path.cubicTo(30, 30, 200, 350, 350, 30)<br></code></pre></td></tr></table></figure>

<p>我们创建带<code>QPainterPath</code>路径的贝塞尔曲线。曲线使用<code>cubicTo()</code>方法创建，该方法采用三个点：起点、控制点和终点。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">qp.drawPath(path)<br></code></pre></td></tr></table></figure>

<p>最后路径使用<code>drawPath()</code>方法绘制。</p>
<p><img src="image-20200820211503379.png" alt="image-20200820211503379"></p>
<center>图：贝塞尔曲线</center>

<p>在 PyQt5 教程的这一部分中，我们做了一些基本的绘画。</p>

	</div>
</div>
<!-- 返回顶部模块 -->
<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;font-size:26px;background-color:#8590a6">
	<a title="返回顶部" style="color:#04fa9f"><⇧></a>
</div>
<script src="/js/totop.js"></script>

  </body>

</html>