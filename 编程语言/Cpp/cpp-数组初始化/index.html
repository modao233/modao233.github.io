<!DOCTYPE html>
<html>
<!-- html页面布局的head -->

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<title>
		modao
	</title>

	<!-- 百度统计代码 -->
	<script>
		var _hmt = _hmt || [];
		(function () {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?902dc461fe0d25f09e74e0d04677b6d8";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();
	</script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-N2WTGJE0M5"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-N2WTGJE0M5');
	</script>
<meta name="generator" content="Hexo 5.4.0"></head>

  <body>

    <!-- 文章详情页模板 -->

<!-- 主页标题栏 -->

<link rel="stylesheet" href="/css/navigatebar.css">


<header class="header">
	<div class="topbar">
		<div class="topbar-button topbar-mine">
			<a href="/">
				modao
			</a>
		</div>
		
			<div class="topbar-button">
				<a href="/">
					Home
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/categories">
					Categories
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/links">
					Friends
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/sites">
					Sites
				</a>
			</div>
		
			<div class="topbar-button">
				<a href="/stars">
					Stars
				</a>
			</div>
		

	</div>
	<div class="slogan">
		「工作日还有多少天，休息日还剩几小时」
	</div>
</header>


<link rel="stylesheet" href="/css/font.css">


<link rel="stylesheet" href="/css/post.css" media="screen and (min-width: 600px)">


<link rel="stylesheet" href="/css/post_mobile.css" media="screen and (max-width: 600px)">


<link rel="stylesheet" href="/css/highlight.css">




<div class="toc">
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#vector%E6%95%B0%E7%BB%84%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">vector数组的初始化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E6%95%B0%E7%BB%84%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">普通数组的初始化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">全局作用域</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">局部作用域</span></a></li></ol></li></ol>
</div>

<div class="content-area">
	<div class="title">
		cpp-数组初始化
	</div>
	
	<div class="page-date">
		2020-06-29
	</div>
	
	<div class="category-area">
		
			 
				「
				<div class="category">
					<a href="/categories/C++">C++</a>
				
				</div>
				」
			
		
	</div>
	
	<div class="content">
		<p>在C++中，普通数组是固定长度的，标准库类型vector可理解为可扩充数组（即长度不固定）。</p>
<p>编译参数：<code>g++ --std=c++2a</code></p>
<span id="more"></span>

<h2 id="vector数组的初始化"><a href="#vector数组的初始化" class="headerlink" title="vector数组的初始化"></a>vector数组的初始化</h2><table>
<thead>
<tr>
<th>初始化vector对象的方法</th>
<th>方法说明</th>
</tr>
</thead>
<tbody><tr>
<td>vector v1</td>
<td>v1是一个空vector，它潜在的元素是T类型的，执行默认初始化</td>
</tr>
<tr>
<td>vector v2(v1)</td>
<td>v2中包含v1所有元素的副本</td>
</tr>
<tr>
<td>vector v2 = v1</td>
<td>等价于v2(v1)，v2中包含v1所有元素的副本</td>
</tr>
<tr>
<td>vector v3(n, val)</td>
<td>v3包含了n个重复的元素，每个元素的值都是val</td>
</tr>
<tr>
<td>vector v4(n)</td>
<td>v4包含了n个重复地执行了值初始化的对象</td>
</tr>
<tr>
<td>vector v5{a, b, c…}</td>
<td>v5包含了初始值个数的元素，每个元素被赋予相应的初始值</td>
</tr>
<tr>
<td>vector v5 = {a, b, c…}</td>
<td>等价于v5{a, b, c…}</td>
</tr>
</tbody></table>
<p>C++11新标准还提供了列表初始化。用<strong>花括号</strong>括起来的0个或多个初始元素值被赋给vector对象：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><code class="hljs c++">vector&lt;string&gt; articles = &#123;<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;an&quot;</span>, <span class="hljs-string">&quot;the&quot;</span>&#125;;<br></code></pre></td></tr></table></figure>

<p>通常情况下，可以只提供vector对象容纳的元素数量而不用略去初始值。此时库会创建一个<strong>值初始化的</strong>元素初值，该值由元素类型决定：</p>
<ul>
<li>  元素是内置类型，使用默认值</li>
<li>  元素是类类型，元素由类默认初始化</li>
<li>  如果元素的类型不支持默认初始化，则必须明确提供初始值</li>
<li>  只提供元素数量而没有设定初始值，只能使用直接初始化</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><code class="hljs c++"><span class="hljs-function">vector&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">v1</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;        <span class="hljs-comment">//v1有10个元素，每个元素的值都是0</span><br>vector&lt;<span class="hljs-keyword">int</span>&gt; v2&#123;<span class="hljs-number">10</span>&#125;;        <span class="hljs-comment">//v2有1个元素：10</span><br><br><span class="hljs-function">vector&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">v3</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>)</span></span>;    <span class="hljs-comment">//v3有10个元素，每个元素的值都是1</span><br>vector&lt;<span class="hljs-keyword">int</span>&gt; v4&#123;<span class="hljs-number">10</span>, <span class="hljs-number">1</span>&#125;;    <span class="hljs-comment">//v4有2个元素：10和1</span><br></code></pre></td></tr></table></figure>

<p>圆括号提供的值用来构造vector对象；花括号的值作为元素的值，执行列表初始化。</p>
<p>如果初始化使用花括号但是提供的值又不能用来列表初始化，就会考虑用这样的值来构造对象。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><code class="hljs c++">vector&lt;string&gt; v5&#123;<span class="hljs-string">&quot;hi&quot;</span>&#125;;    <span class="hljs-comment">//列表初始化，v5有1个元素</span><br><span class="hljs-function">vector&lt;string&gt; <span class="hljs-title">v6</span><span class="hljs-params">(<span class="hljs-string">&quot;hi&quot;</span>)</span></span>;    <span class="hljs-comment">//错误：不能用字符串字面值构建vector对象</span><br>vector&lt;string&gt; v7&#123;<span class="hljs-number">10</span>&#125;;        <span class="hljs-comment">//v7有10个默认初始化的元素</span><br>vector&lt;string&gt; v8&#123;<span class="hljs-number">10</span>, <span class="hljs-string">&quot;hi&quot;</span>&#125;;<span class="hljs-comment">//v8有10个值为“hi”的元素</span><br></code></pre></td></tr></table></figure>

<h2 id="普通数组的初始化"><a href="#普通数组的初始化" class="headerlink" title="普通数组的初始化"></a>普通数组的初始化</h2><p>默认初始化，变量没有指定处值将被赋予默认值，由变量类型决定，且受定义变量位置影响：</p>
<ul>
<li>  定义于任何函数体之外的变量被初始化为0</li>
<li>  函数体内部的内置类型变量不被初始化，未被初始化的内置类型变量的值是未定义的</li>
</ul>
<h3 id="全局作用域"><a href="#全局作用域" class="headerlink" title="全局作用域"></a>全局作用域</h3><p>位于全局作用域的数组没有赋初值时，都默认初始化成0。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">using</span> std::cin;<br><span class="hljs-keyword">using</span> std::cout;<br><span class="hljs-keyword">using</span> std::vector;<br><span class="hljs-keyword">using</span> std::endl;<br><br><span class="hljs-keyword">int</span> a[<span class="hljs-number">10</span>];<br><span class="hljs-keyword">int</span> b[<span class="hljs-number">10</span>][<span class="hljs-number">10</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span></span>&#123;    <br>    cout &lt;&lt; <span class="hljs-string">&quot;测试一维数组&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;测试二维数组&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; i++)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10</span>; j++)&#123;<br>            cout &lt;&lt; b[i][j] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        &#125;<br>        cout &lt;&lt; endl;<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">测试一维数组<br>0 0 0 0 0 0 0 0 0 0 <br>测试二维数组<br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br></code></pre></td></tr></table></figure>

<h3 id="局部作用域"><a href="#局部作用域" class="headerlink" title="局部作用域"></a>局部作用域</h3><p>函数体内部的内置类型变量不被初始化，未被初始化的内置类型变量的值是未定义的</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">using</span> std::cin;<br><span class="hljs-keyword">using</span> std::cout;<br><span class="hljs-keyword">using</span> std::vector;<br><span class="hljs-keyword">using</span> std::endl;<br><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span></span>&#123;<br>    <span class="hljs-comment">// int a[10]= &#123;0&#125;;</span><br>    <span class="hljs-comment">// int b[10][10]= &#123;0&#125;;</span><br>    <span class="hljs-keyword">int</span> a[<span class="hljs-number">10</span>];<br>    <span class="hljs-keyword">int</span> b[<span class="hljs-number">10</span>][<span class="hljs-number">10</span>];    <br>    cout &lt;&lt; <span class="hljs-string">&quot;测试一维数组&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;测试二维数组&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; i++)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10</span>; j++)&#123;<br>            cout &lt;&lt; b[i][j] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        &#125;<br>        cout &lt;&lt; endl;<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>运行结果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">测试一维数组<br>0 0 0 0 8 0 4199705 0 8 0 <br>测试二维数组<br>6421704 0 1875947768 0 1875947560 0 1875947840 0 1875946976 0 <br>1875893184 0 1875947560 0 6421704 0 1875947560 0 1875855620 0 <br>1875947768 0 1875865606 0 1875947552 0 1875746568 0 3 0 <br>1875937088 0 13959168 0 1875947560 0 1875942272 0 1875865824 0 <br>39 0 1875208332 0 13960008 0 268501009 0 13961056 0 <br>-747787642 32767 4206232 0 0 0 4200108 0 16 0 <br>0 0 0 0 8 0 4199705 0 4206232 0 <br>4206224 0 13983824 0 16 0 0 0 4200188 0 <br>4199744 0 8 0 0 0 268501009 0 13961064 0 <br>-747787642 32767 8 0 0 0 4200304 0 24 0<br></code></pre></td></tr></table></figure>

<p>列表初始化后：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><br><span class="hljs-keyword">using</span> std::cin;<br><span class="hljs-keyword">using</span> std::cout;<br><span class="hljs-keyword">using</span> std::vector;<br><span class="hljs-keyword">using</span> std::endl;<br><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>* argv[])</span></span>&#123;<br>    <span class="hljs-keyword">int</span> a[<span class="hljs-number">10</span>]= &#123;<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-keyword">int</span> b[<span class="hljs-number">10</span>][<span class="hljs-number">10</span>]= &#123;<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-comment">// int a[10];</span><br>    <span class="hljs-comment">// int b[10][10];    </span><br>    cout &lt;&lt; <span class="hljs-string">&quot;测试一维数组&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    cout &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;测试二维数组&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; i++)&#123;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10</span>; j++)&#123;<br>            cout &lt;&lt; b[i][j] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>        &#125;<br>        cout &lt;&lt; endl;<br>    &#125;<br>    <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>运行结果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><code class="hljs plaintext">测试一维数组<br>0 0 0 0 0 0 0 0 0 0 <br>测试二维数组<br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0 <br>0 0 0 0 0 0 0 0 0 0<br></code></pre></td></tr></table></figure>

<p><strong>按道理二维数组这样初始化只能初始化第一行，但是结果却复现不出来:joy:，但还是记录下比较稳妥的方法</strong>：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//最简单粗暴的方法就是逐个赋值，我就不写了</span><br><span class="hljs-keyword">int</span>* b[<span class="hljs-number">10</span>];<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; i++)b[i] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">10</span>]&#123;<span class="hljs-number">0</span>&#125;;<br>...<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt; <span class="hljs-number">10</span>; i++)<span class="hljs-keyword">delete</span>[] b[i];<br></code></pre></td></tr></table></figure>






	</div>
</div>
<!-- 返回顶部模块 -->
<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;font-size:26px;background-color:#8590a6">
	<a title="返回顶部" style="color:#04fa9f"><⇧></a>
</div>
<script src="/js/totop.js"></script>

  </body>

</html>